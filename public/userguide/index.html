<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#1a202c" media="(prefers-color-scheme: dark)">
    <title data-i18n="meta.title">Connect365 - User Guide</title>
    <link rel="icon" type="image/svg+xml" href="/icons/icon-512x512.png">
    <style>
        :root {
            --primary-color: #3182ce;
            --primary-hover: #2c5aa0;
            --bg-color: #ffffff;
            --text-color: #1a202c;
            --border-color: #e2e8f0;
            --sidebar-bg: #f7fafc;
            --code-bg: #edf2f7;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            --primary-color: #4299e1;
            --primary-hover: #63b3ed;
            --bg-color: #1a202c;
            --text-color: #e2e8f0;
            --border-color: #2d3748;
            --sidebar-bg: #2d3748;
            --code-bg: #2d3748;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.3);
        }

        @media (prefers-color-scheme: dark) {
            :root:not([data-theme="light"]) {
                --primary-color: #4299e1;
                --primary-hover: #63b3ed;
                --bg-color: #1a202c;
                --text-color: #e2e8f0;
                --border-color: #2d3748;
                --sidebar-bg: #2d3748;
                --code-bg: #2d3748;
                --shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
                --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.3);
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: var(--bg-color);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            padding: 0 2rem;
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary-color);
            text-decoration: none;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .search-box {
            position: relative;
        }

        .search-input {
            padding: 0.5rem 2.5rem 0.5rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: var(--bg-color);
            color: var(--text-color);
            width: 250px;
            font-size: 0.875rem;
            transition: all 0.2s;
        }
        
        .search-input::placeholder {
            color: var(--text-color);
            opacity: 0.5;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
        }

        .search-icon {
            position: absolute;
            right: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            opacity: 0.5;
        }

        .theme-toggle {
            padding: 0.5rem;
            background: transparent;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            color: var(--text-color);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .theme-toggle:hover {
            background: var(--sidebar-bg);
        }

        .theme-toggle svg {
            width: 20px;
            height: 20px;
        }

        /* Language Selector */
        .language-selector {
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: var(--bg-color);
            color: var(--text-color);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .language-selector:hover {
            border-color: var(--primary-color);
        }

        .language-selector:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 60px;
            left: 0;
            width: 280px;
            height: calc(100vh - 60px);
            background: var(--sidebar-bg);
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            padding: 2rem 0;
        }

        .sidebar-section {
            margin-bottom: 2rem;
        }

        .sidebar-title {
            padding: 0 1.5rem;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-color);
            opacity: 0.6;
            margin-bottom: 0.75rem;
        }

        .sidebar-nav {
            list-style: none;
        }

        .sidebar-nav li {
            margin-bottom: 0.25rem;
        }

        .sidebar-link {
            display: block;
            padding: 0.625rem 1.5rem;
            color: var(--text-color);
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .sidebar-link:hover {
            background: var(--bg-color);
            color: var(--primary-color);
        }

        .sidebar-link.active {
            background: var(--bg-color);
            color: var(--primary-color);
            border-left-color: var(--primary-color);
            font-weight: 600;
        }

        .sidebar-subsection {
            margin-top: 0.25rem;
            list-style: none;
            padding-left: 1rem;
        }

        .sidebar-subsection .sidebar-link {
            font-size: 0.85rem;
            padding-left: 2rem;
        }

        /* Main Content */
        .main {
            margin-left: 280px;
            margin-top: 60px;
            flex: 1;
            padding: 3rem;
            max-width: 900px;
        }

        .content h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .content h2 {
            font-size: 1.875rem;
            margin-top: 3rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border-color);
            color: var(--text-color);
        }

        .content h3 {
            font-size: 1.5rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .content h4 {
            font-size: 1.25rem;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            color: var(--text-color);
        }

        .content p {
            margin-bottom: 1rem;
        }

        .content ul, .content ol {
            margin-bottom: 1rem;
            padding-left: 2rem;
        }

        .content li {
            margin-bottom: 0.5rem;
        }

        .content code {
            background: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-size: 0.875em;
            font-family: 'Courier New', monospace;
        }

        .content pre {
            background: var(--code-bg);
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
            margin-bottom: 1rem;
        }

        .content pre code {
            background: none;
            padding: 0;
        }

        /* Screenshot Placeholder */
        .screenshot {
            background: var(--code-bg);
            border: 2px dashed var(--border-color);
            border-radius: 8px;
            padding: 3rem;
            text-align: center;
            margin: 2rem 0;
            color: var(--text-color);
            opacity: 0.7;
        }

        .screenshot-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 1rem;
            opacity: 0.5;
        }

        .screenshot-label {
            font-size: 0.875rem;
            font-style: italic;
        }

        /* Info Box */
        .info-box {
            background: rgba(49, 130, 206, 0.1);
            border-left: 4px solid var(--primary-color);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        .info-box-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .warning-box {
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid #f59e0b;
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        .warning-box-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #f59e0b;
        }

        /* Table */
        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
        }

        .content th,
        .content td {
            padding: 0.75rem;
            text-align: left;
            border: 1px solid var(--border-color);
        }

        .content th {
            background: var(--sidebar-bg);
            font-weight: 600;
        }

        /* Quick Links */
        .quick-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .quick-link-card {
            background: var(--sidebar-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            text-decoration: none;
            color: var(--text-color);
            transition: all 0.2s;
        }

        .quick-link-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .quick-link-icon {
            width: 32px;
            height: 32px;
            margin-bottom: 0.75rem;
            color: var(--primary-color);
        }

        .quick-link-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .quick-link-desc {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        /* Search Results */
        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            margin-top: 0.5rem;
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            box-shadow: var(--shadow-lg);
            max-height: 400px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
        }

        .search-results.show {
            display: block;
        }

        .search-result-item {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: background 0.2s;
        }

        .search-result-item:hover {
            background: var(--sidebar-bg);
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--primary-color);
        }

        .search-result-snippet {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        .no-results {
            padding: 2rem;
            text-align: center;
            opacity: 0.6;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
                z-index: 50;
            }

            .sidebar.show {
                transform: translateX(0);
            }

            .main {
                margin-left: 0;
                padding: 2rem 1rem;
            }

            .search-input {
                width: 150px;
            }

            .content h1 {
                font-size: 2rem;
            }

            .content h2 {
                font-size: 1.5rem;
            }
        }

        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            padding: 0.5rem;
            background: none;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            color: var(--text-color);
        }

        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }

        .menu-icon {
            width: 24px;
            height: 24px;
        }

        /* Agent Button Visual Styles */
        .agent-btn-demo {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.375rem;
            padding: 0.375rem 0.75rem;
            font-size: 0.75rem;
            font-weight: 500;
            border-radius: 6px;
            border: 1px solid;
            white-space: nowrap;
            vertical-align: middle;
        }
        
        .agent-btn-demo svg {
            width: 14px;
            height: 14px;
            flex-shrink: 0;
        }
        
        .agent-btn-demo.btn-secondary {
            background: var(--bg-color);
            border-color: var(--border-color);
            color: var(--text-color);
        }
        
        .agent-btn-demo.btn-success {
            background: #22c55e;
            border-color: #22c55e;
            color: white;
        }
        
        .agent-btn-demo.btn-warning {
            background: #eab308;
            border-color: #eab308;
            color: white;
        }
        
        .agent-btn-demo.btn-disabled {
            background: var(--bg-color);
            border-color: var(--border-color);
            color: var(--text-color);
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <button class="mobile-menu-toggle" onclick="toggleSidebar()">
                <svg class="menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
            </button>
            <a href="#" class="logo">
                <svg class="logo-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h16v12z"/>
                    <path d="M6.5 9.5h3v5h-3zm4.5 0h3v5h-3zm4.5 0h3v5h-3z"/>
                </svg>
                Connect365 User Guide
            </a>
            <div class="header-actions">
                <div class="search-box">
                    <input type="text" class="search-input" id="searchInput" data-i18n-placeholder="meta.search_placeholder" placeholder="Search documentation...">
                    <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    <div class="search-results" id="searchResults"></div>
                </div>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <svg class="theme-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
                    </svg>
                </button>
                <!-- Language Selector -->
                <select class="language-selector" id="languageSelector" onchange="changeLanguage(this.value)">
                    <option value="en">English</option>
                    <option value="es">Espa√±ol</option>
                    <option value="es-419">Espa√±ol (Latinoam√©rica)</option>
                    <option value="fi-FI">Suomi</option>
                    <option value="fr">Fran√ßais</option>
                    <option value="fr-CA">Fran√ßais (Canada)</option>
                    <option value="nl">Nederlands</option>
                    <option value="pt">Portugu√™s</option>
                    <option value="pt-BR">Portugu√™s (Brasil)</option>
                </select>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">Getting Started</div>
                <ul class="sidebar-nav">
                    <li><a href="#overview" class="sidebar-link active">Overview</a></li>
                    <li><a href="#installation" class="sidebar-link">Installation</a></li>
                    <li><a href="#first-setup" class="sidebar-link">First Time Setup</a></li>
                    <li><a href="#quick-start" class="sidebar-link">Quick Start Guide</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Core Features</div>
                <ul class="sidebar-nav">
                    <li>
                        <a href="#agent-controls" class="sidebar-link">Agent Controls</a>
                        <ul class="sidebar-subsection">
                            <li><a href="#agent-status" class="sidebar-link">Agent Status Display</a></li>
                            <li><a href="#agent-login-button" class="sidebar-link">Login Button</a></li>
                            <li><a href="#agent-queue-button" class="sidebar-link">Queue Button</a></li>
                            <li><a href="#agent-pause-button" class="sidebar-link">Pause Button</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#making-calls" class="sidebar-link">Making Calls</a>
                        <ul class="sidebar-subsection">
                            <li><a href="#outbound-calls" class="sidebar-link">Outbound Calls</a></li>
                            <li><a href="#receiving-calls" class="sidebar-link">Receiving Calls</a></li>
                            <li><a href="#call-controls" class="sidebar-link">Call Controls</a></li>
                        </ul>
                    </li>
                    <li><a href="#contacts" class="sidebar-link">Contacts Management</a></li>
                    <li><a href="#call-history" class="sidebar-link">Call History</a></li>
                    <li><a href="#voicemail" class="sidebar-link">Voicemail</a></li>
                    <li><a href="#blf-monitoring" class="sidebar-link">BLF Monitoring</a></li>
                    <li><a href="#company-numbers" class="sidebar-link">Company Numbers</a></li>
                    <li><a href="#queue-monitor" class="sidebar-link">Queue Monitor</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Settings</div>
                <ul class="sidebar-nav">
                    <li><a href="#connection-settings" class="sidebar-link">Connection Settings</a></li>
                    <li><a href="#interface-settings" class="sidebar-link">Interface Settings</a></li>
                    <li><a href="#call-settings" class="sidebar-link">Call Settings</a></li>
                    <li><a href="#queues-settings" class="sidebar-link">Queues Settings</a></li>
                    <li><a href="#audio-settings" class="sidebar-link">Audio Settings</a></li>
                    <li><a href="#busylight-settings" class="sidebar-link">Busylight Settings</a></li>
                    <li><a href="#advanced-settings" class="sidebar-link">Advanced Settings</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Troubleshooting</div>
                <ul class="sidebar-nav">
                    <li><a href="#common-issues" class="sidebar-link">Common Issues</a></li>
                    <li><a href="#audio-problems" class="sidebar-link">Audio Problems</a></li>
                    <li><a href="#connection-problems" class="sidebar-link">Connection Problems</a></li>
                    <li><a href="#verbose-logging" class="sidebar-link">Enabling Verbose Logging</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Reference</div>
                <ul class="sidebar-nav">
                    <li><a href="#keyboard-shortcuts" class="sidebar-link">Keyboard Shortcuts</a></li>
                    <li><a href="#feature-index" class="sidebar-link">Feature Index</a></li>
                    <li><a href="#glossary" class="sidebar-link">Glossary</a></li>
                    <li><a href="#support" class="sidebar-link">Support & Feedback</a></li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main">
            <div class="content">
                <!-- Overview Section -->
                <section id="overview">
                    <h1>Connect365 User Guide</h1>
                    <p>Welcome to Connect365 - a powerful WebRTC SIP phone designed for Autocab365 taxi dispatch systems. This guide will help you get started and make the most of all available features.</p>

                    <div class="quick-links">
                        <a href="#installation" class="quick-link-card">
                            <svg class="quick-link-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                            </svg>
                            <div class="quick-link-title">Installation</div>
                            <div class="quick-link-desc">Install Connect365 on your device</div>
                        </a>
                        <a href="#first-setup" class="quick-link-card">
                            <svg class="quick-link-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            </svg>
                            <div class="quick-link-title">First Setup</div>
                            <div class="quick-link-desc">Configure your connection</div>
                        </a>
                        <a href="#making-calls" class="quick-link-card">
                            <svg class="quick-link-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                            </svg>
                            <div class="quick-link-title">Making Calls</div>
                            <div class="quick-link-desc">Learn how to place and receive calls</div>
                        </a>
                        <a href="#common-issues" class="quick-link-card">
                            <svg class="quick-link-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <div class="quick-link-title">Troubleshooting</div>
                            <div class="quick-link-desc">Resolve common issues</div>
                        </a>
                    </div>
                </section>

                <!-- Installation Section -->
                <section id="installation">
                    <h2>Installation</h2>
                    <p>Connect365 is a Progressive Web App (PWA) that can be installed on your device for a native app experience.</p>
                    
                    <h3>Desktop Installation</h3>
                    <ol>
                        <li>Open Connect365 in your browser (Chrome, Edge, or Safari recommended)</li>
                        <li>Look for the install button in the address bar or browser menu</li>
                        <li>Click "Install" to add Connect365 to your desktop</li>
                        <li>The app will open in its own window, separate from your browser</li>
                    </ol>

                    <div class="screenshot">
                        <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                        <div class="screenshot-label">Screenshot: Desktop installation prompt</div>
                    </div>

                    <div class="info-box">
                        <div class="info-box-title">üí° Tip</div>
                        <p>Installing Connect365 as a PWA provides better performance, offline capabilities, and notifications.</p>
                    </div>
                </section>

                <!-- First Time Setup -->
                <section id="first-setup">
                    <h2>First Time Setup</h2>
                    <p>Before you can make calls, you need to configure your connection settings with your Phantom ID and SIP credentials.</p>

                    <h3>Welcome Screen</h3>
                    <p>When you first launch Connect365, you'll see a welcome screen prompting you to configure your connection settings. Click the <strong>Go to Settings</strong> button to begin the setup process.</p>

                    <div class="screenshot">
                        <img src="images/welcome-screen.png" alt="Welcome screen showing Go to Settings button" style="max-width: 100%; border-radius: 8px; border: 1px solid var(--border-color);" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="screenshot-placeholder" style="display: none;">
                            <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                            <div class="screenshot-label">Screenshot: Welcome screen with Go to Settings button</div>
                        </div>
                    </div>

                    <h3>Step 1: Open Settings</h3>
                    <p>If you've dismissed the welcome screen, you can access settings manually:</p>
                    <ol>
                        <li>Click the <strong>Settings</strong> tab in the tab navigation bar</li>
                        <li>The Connection settings section should open automatically</li>
                    </ol>

                    <div class="screenshot">
                        <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                        <div class="screenshot-label">Screenshot: Settings tab location</div>
                    </div>

                    <h3>Step 2: Enter Connection Details</h3>
                    <p>You'll need the following information from your administrator:</p>
                    <ul>
                        <li><strong>Phantom ID</strong>: Your unique server identifier (e.g., 388)</li>
                        <li><strong>SIP Username</strong>: Your extension number</li>
                        <li><strong>SIP Password</strong>: Your SIP password</li>
                        <li><strong>Voicemail Access</strong>: Voicemail retrieval number (optional)</li>
                    </ul>

                    <div class="screenshot">
                        <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        <div class="screenshot-label">Screenshot: Connection settings form</div>
                    </div>

                    <h3>Step 3: Save and Connect</h3>
                    <ol>
                        <li>Enter all required information</li>
                        <li>Click the <strong>Save Connection Settings</strong> button</li>
                        <li>Click the <strong>Connect</strong> button at the top of the app to connect to Phantom</li>
                        <li>Wait for the registration status to show "Registered"</li>
                    </ol>

                    <div class="info-box">
                        <div class="info-box-title">üí° About Phantom ID</div>
                        <p>The Phantom ID automatically generates the correct server URLs for your connection. You don't need to manually enter server addresses.</p>
                    </div>

                    <div class="info-box">
                        <div class="info-box-title">üí° Connect Button</div>
                        <p>Saving your settings does not automatically connect you to Phantom. You must press the <strong>Connect</strong> button in the header to initiate the connection and register with the server.</p>
                    </div>

                    <div class="warning-box">
                        <div class="warning-box-title">‚ö†Ô∏è Important</div>
                        <p>Make sure your browser has microphone permissions enabled. You'll be prompted to allow access when you first make or receive a call.</p>
                    </div>
                </section>

                <!-- Quick Start Guide -->
                <section id="quick-start">
                    <h2>Quick Start Guide</h2>
                    <p>Once you're set up, here's how to perform common tasks:</p>

                    <h3>Making Your First Call</h3>
                    <ol>
                        <li>Click the <strong>Phone</strong> tab</li>
                        <li>Ensure you are logged in with your agent details (see <a href="#agent-controls">Agent Controls</a>)</li>
                        <li>Enter a phone number using the dialpad</li>
                        <li>Click the green <strong>Call</strong> button</li>
                        <li>Use the call controls during the call (mute, hold, transfer, etc.)</li>
                        <li>Click <strong>Hang Up</strong> when finished</li>
                    </ol>

                    <h3>Adding a Contact</h3>
                    <ol>
                        <li>Click the <strong>Contacts</strong> tab</li>
                        <li>Click the <strong>Add Contact</strong> button</li>
                        <li>Enter contact details (name, number, company)</li>
                        <li>Click <strong>Save</strong></li>
                    </ol>

                    <h3>Viewing Call History</h3>
                    <ol>
                        <li>Click the <strong>Activity</strong> tab</li>
                        <li>Browse your recent calls</li>
                        <li>Click the callback icon to return to the Phone tab with the number pre-filled</li>
                    </ol>
                </section>

                <!-- Agent Controls Section -->
                <section id="agent-controls">
                    <h2>Agent Controls</h2>
                    <p>Connect365 provides dedicated agent controls for call center operations. The agent control buttons are located at the top of the dialpad and allow you to manage your agent status within the Phantom PBX system.</p>

                    <h3 id="agent-status">Agent Status Display</h3>
                    <p>The status bar below the header shows your current connection and agent state:</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Status Display</th>
                                <th>Meaning</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>No connection to server</strong></td>
                                <td>Your phone is not registered to the SIP server. Press the <strong>Connect</strong> button at the top of the screen to register.</td>
                            </tr>
                            <tr>
                                <td><strong>Agent: Not Logged In</strong></td>
                                <td>You are connected to the server but not logged in as an agent. Press the Login button to sign in.</td>
                            </tr>
                            <tr>
                                <td><strong>Agent: 123 - Name</strong></td>
                                <td>You are logged in as an agent. Your agent number and name are displayed.</td>
                            </tr>
                            <tr>
                                <td><strong>Agent: [PAUSED] 123 - Name</strong></td>
                                <td>You are logged in but currently paused (unavailable to receive queue calls).</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3 id="agent-login-button">Login Button</h3>
                    <p>The Login button controls your agent session with the Phantom PBX.</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Button</th>
                                <th>State</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="agent-btn-demo btn-secondary"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/><polyline points="10 17 15 12 10 7"/><line x1="15" y1="12" x2="3" y2="12"/></svg>Login</span></td>
                                <td>Not logged in</td>
                                <td>Click to open the agent login dialog. Enter your agent number and optional passcode to log in.</td>
                            </tr>
                            <tr>
                                <td><span class="agent-btn-demo btn-success"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>Logout</span></td>
                                <td>Logged in</td>
                                <td>Click to log out of your agent session. Your agent number will be cleared and you will no longer receive queue calls.</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box">
                        <div class="info-box-title">üí° Agent Login</div>
                        <p>When you log in, Connect365 first attempts to use the API method. If that fails, it automatically falls back to DTMF-based login by dialing the agent login code.</p>
                    </div>

                    <h3 id="agent-queue-button">Queue Button</h3>
                    <p>The Queue button manages your membership in call queues.</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Button</th>
                                <th>State</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="agent-btn-demo btn-secondary"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>Queue</span></td>
                                <td>Not in queue</td>
                                <td>You are not currently in any queue. Click to open the queue selection dialog and join queues.</td>
                            </tr>
                            <tr>
                                <td><span class="agent-btn-demo btn-success"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>In Queue</span></td>
                                <td>In queue</td>
                                <td>You are logged into one or more queues. Click to manage your queue membership or log out of queues.</td>
                            </tr>
                            <tr>
                                <td><span class="agent-btn-demo btn-disabled"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>Queue</span></td>
                                <td>Disabled</td>
                                <td>You must be logged in as an agent before you can join queues.</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3 id="agent-pause-button">Pause Button</h3>
                    <p>The Pause button allows you to temporarily make yourself unavailable for queue calls without logging out.</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Button</th>
                                <th>State</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="agent-btn-demo btn-secondary"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>Pause</span></td>
                                <td>Available</td>
                                <td>You are available to receive queue calls. Click to pause - you may be prompted to select a pause reason.</td>
                            </tr>
                            <tr>
                                <td><span class="agent-btn-demo btn-warning"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>Paused</span></td>
                                <td>Paused</td>
                                <td>You are currently paused. Click to resume and become available for queue calls again.</td>
                            </tr>
                            <tr>
                                <td><span class="agent-btn-demo btn-disabled"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>Pause</span></td>
                                <td>Disabled</td>
                                <td>You must be logged in as an agent before you can pause.</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="warning-box">
                        <div class="warning-box-title">‚ö†Ô∏è Important</div>
                        <p>While paused, you will not receive any calls from queues. Direct calls to your extension will still ring through. Remember to unpause when you are ready to take calls again.</p>
                    </div>

                    <div class="info-box">
                        <div class="info-box-title">üí° Pause on Active Call</div>
                        <p>You can pause while on an active call. The pause will take effect immediately without interrupting your current conversation.</p>
                    </div>
                </section>

                <!-- Making Calls Section -->
                <section id="making-calls">
                    <h2>Making Calls</h2>
                    <p>Connect365 provides multiple ways to initiate and manage calls.</p>

                    <h3 id="outbound-calls">Outbound Calls</h3>
                    <p>There are several ways to make an outbound call:</p>

                    <h4>Method 1: Using the Dialpad</h4>
                    <ol>
                        <li>Navigate to the <strong>Phone</strong> tab</li>
                        <li>Click numbers on the dialpad or type using your keyboard</li>
                        <li>Click the green <strong>Call</strong> button or press Enter</li>
                    </ol>

                    <div class="screenshot">
                        <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"/>
                        </svg>
                        <div class="screenshot-label">Screenshot: Phone dialpad interface</div>
                    </div>

                    <h4>Method 2: From Contacts</h4>
                    <ol>
                        <li>Go to the <strong>Contacts</strong> tab</li>
                        <li>Find the contact you want to call</li>
                        <li>Click the phone icon next to their name</li>
                    </ol>

                    <h4>Method 3: From Call History</h4>
                    <ol>
                        <li>Go to the <strong>Activity</strong> tab</li>
                        <li>Find the call you want to return</li>
                        <li>Click the phone icon to call back</li>
                    </ol>

                    <h3 id="receiving-calls">Receiving Calls</h3>
                    <p>When someone calls you:</p>
                    <ol>
                        <li>You'll see an incoming call notification</li>
                        <li>The caller's number will be displayed. If the number matches a saved contact, the contact name will be shown instead</li>
                        <li>Click <strong>Answer</strong> to accept the call</li>
                        <li>Or click <strong>Reject</strong> to decline</li>
                    </ol>

                    <div class="screenshot">
                        <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                        </svg>
                        <div class="screenshot-label">Screenshot: Incoming call notification</div>
                    </div>

                    <div class="info-box">
                        <div class="info-box-title">üí° Desktop Notifications</div>
                        <p>If enabled in Settings > Call Settings, incoming calls will show a desktop notification in your taskbar. You can click the notification to answer the call directly.</p>
                    </div>

                    <div class="info-box">
                        <div class="info-box-title">üí° Auto Focus</div>
                        <p>When enabled in Settings > Call Settings, incoming calls will automatically bring the app to the foreground and switch to the Phone tab.</p>
                    </div>

                    <div class="info-box">
                        <div class="info-box-title">üí° Auto Answer Options</div>
                        <p>There are two ways to enable auto-answer:</p>
                        <ul>
                            <li><strong>App Auto Answer</strong> (Settings > Call Settings): Automatically answers <em>all</em> incoming calls</li>
                            <li><strong>Phantom *11</strong>: When enabled on the PBX, automatically answers queue and group calls only. DDI and internal calls will ring as normal.</li>
                        </ul>
                    </div>

                    <h3 id="call-controls">Call Controls</h3>
                    <p>During an active call, you have access to several controls:</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Control</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Mute</strong></td>
                                <td>Mute/unmute your microphone</td>
                            </tr>
                            <tr>
                                <td><strong>Hold</strong></td>
                                <td>Put the call on hold</td>
                            </tr>
                            <tr>
                                <td><strong>Transfer</strong></td>
                                <td>Transfer the call to another extension</td>
                            </tr>
                            <tr>
                                <td><strong>Hang Up</strong></td>
                                <td>End the call</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="screenshot">
                        <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"/>
                        </svg>
                        <div class="screenshot-label">Screenshot: Active call controls</div>
                    </div>

                    <h4>Call Transfer</h4>
                    <p>There are two types of call transfers:</p>
                    <ul>
                        <li><strong>Blind Transfer</strong>: Transfer immediately without speaking to the recipient</li>
                        <li><strong>Attended Transfer</strong>: Speak with the recipient before completing the transfer</li>
                    </ul>

                    <div class="screenshot">
                        <img src="images/call-transfer.png" alt="Call transfer options" style="max-width: 100%; border-radius: 8px; border: 1px solid var(--border-color);" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="screenshot-placeholder" style="display: none;">
                            <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                            <div class="screenshot-label">Screenshot: Call transfer options</div>
                        </div>
                    </div>

                    <p>To transfer a call:</p>
                    <ol>
                        <li>Click the <strong>Transfer</strong> button during a call</li>
                        <li>Enter the extension or number to transfer to</li>
                        <li>Choose blind or attended transfer</li>
                        <li>Complete the transfer</li>
                    </ol>

                    <div class="info-box">
                        <div class="info-box-title">üí° Default Transfer Method</div>
                        <p>You can set your preferred default transfer method in Settings > Call Settings. This default is used when pressing Enter in the transfer dialog or when transferring via BLF buttons.</p>
                    </div>
                </section>

                <!-- Contacts Section -->
                <section id="contacts">
                    <h2>Contacts Management</h2>
                    <p>Manage your contacts to quickly call frequently dialed numbers.</p>

                    <h3>Adding Contacts</h3>
                    <ol>
                        <li>Go to the <strong>Contacts</strong> tab</li>
                        <li>Click <strong>Add Contact</strong></li>
                        <li>Fill in the contact information:
                            <ul>
                                <li>First Name</li>
                                <li>Last Name</li>
                                <li>Company Name</li>
                                <li>Contact Number (required)</li>
                            </ul>
                            <em>Note: At least one of First Name, Last Name, or Company Name is required.</em>
                        </li>
                        <li>Click <strong>Save</strong></li>
                    </ol>

                    <div class="screenshot">
                        <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"/>
                        </svg>
                        <div class="screenshot-label">Screenshot: Add contact modal</div>
                    </div>

                    <h3>Editing Contacts</h3>
                    <ol>
                        <li>Find the contact in your contacts list</li>
                        <li>Click the <strong>three dots</strong> menu icon on the contact</li>
                        <li>Select <strong>Edit</strong></li>
                        <li>Update the information</li>
                        <li>Click <strong>Save</strong></li>
                    </ol>

                    <h3>Deleting Contacts</h3>
                    <ol>
                        <li>Find the contact you want to delete</li>
                        <li>Click the <strong>three dots</strong> menu icon on the contact</li>
                        <li>Select <strong>Delete</strong></li>
                        <li>Confirm the deletion</li>
                    </ol>

                    <h3>Searching Contacts</h3>
                    <p>Use the search box at the top of the Contacts tab to quickly find contacts by name or number.</p>

                    <div class="info-box">
                        <div class="info-box-title">üí° Quick Call</div>
                        <p>Click the phone icon next to any contact to return to the Phone tab with the number pre-filled.</p>
                    </div>
                </section>

                <!-- Call History Section -->
                <section id="call-history">
                    <h2>Call History</h2>
                    <p>View and manage your call history in the Activity tab.</p>

                    <h3>Viewing Call History</h3>
                    <p>The Activity tab shows all your recent calls with the following information:</p>
                    <ul>
                        <li>Call direction (inbound, outbound, missed)</li>
                        <li>Contact name and/or phone number</li>
                        <li>Date and time</li>
                        <li>Call duration</li>
                    </ul>

                    <div class="screenshot">
                        <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <div class="screenshot-label">Screenshot: Call history view</div>
                    </div>

                    <h3>Call History Actions</h3>
                    <p>For each call history entry, you can:</p>
                    <ul>
                        <li><strong>Call Back</strong>: Click the phone icon to return the call</li>
                    </ul>

                    <h3>Filtering Call History</h3>
                    <p>Filter your call history by:</p>
                    <ul>
                        <li>All calls</li>
                        <li>Missed calls</li>
                        <li>Incoming calls</li>
                        <li>Outgoing calls</li>
                    </ul>
                </section>

                <!-- BLF Monitoring Section -->
                <section id="blf-monitoring">
                    <h2>BLF Monitoring</h2>
                    <p>Busy Lamp Field (BLF) buttons allow you to monitor the status of other extensions and quickly dial or transfer calls to them.</p>

                    <h3>Enabling BLF</h3>
                    <p>BLF buttons must be enabled before they appear on the Phone tab:</p>
                    <ol>
                        <li>Go to <strong>Settings</strong> > <strong>Interface Settings</strong></li>
                        <li>Enable the <strong>Show BLF Buttons</strong> option</li>
                        <li>Return to the <strong>Phone</strong> tab to see the BLF button panels</li>
                    </ol>

                    <h3>Configuring BLF Buttons</h3>
                    <p>To configure a BLF button:</p>
                    <ol>
                        <li>Right-click on any BLF button slot to open the configuration modal</li>
                        <li>Select the button type:
                            <ul>
                                <li><strong>BLF</strong>: Monitor an extension's presence status</li>
                                <li><strong>Speed Dial</strong>: Quick dial button without presence monitoring</li>
                            </ul>
                        </li>
                        <li>Enter the extension number (3-5 digits for BLF) or phone number (for Speed Dial)</li>
                        <li>Optionally enter a display name</li>
                        <li>Click <strong>Save</strong></li>
                    </ol>

                    <div class="screenshot">
                        <img src="images/blf-config-modal.png" alt="BLF configuration modal" style="max-width: 100%; border-radius: 8px; border: 1px solid var(--border-color);" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="screenshot-placeholder" style="display: none;">
                            <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                            <div class="screenshot-label">Screenshot: BLF button configuration modal</div>
                        </div>
                    </div>

                    <h3>BLF Button States</h3>
                    <p>BLF buttons display different colours to indicate the monitored extension's status:</p>

                    <table>
                        <thead>
                            <tr>
                                <th>State</th>
                                <th>Colour</th>
                                <th>Meaning</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Available</strong></td>
                                <td>Green</td>
                                <td>The extension is idle and available to receive calls</td>
                            </tr>
                            <tr>
                                <td><strong>Busy</strong></td>
                                <td>Red</td>
                                <td>The extension is currently on a call</td>
                            </tr>
                            <tr>
                                <td><strong>Ringing</strong></td>
                                <td>Red (flashing)</td>
                                <td>The extension has an incoming call</td>
                            </tr>
                            <tr>
                                <td><strong>Hold</strong></td>
                                <td>Yellow</td>
                                <td>The extension has a call on hold</td>
                            </tr>
                            <tr>
                                <td><strong>Inactive</strong></td>
                                <td>Grey</td>
                                <td>The extension status is unknown or not registered</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box">
                        <div class="info-box-title">üí° Hold State</div>
                        <p>The Hold state requires additional PBX configuration. If you need to monitor hold states, please <a href="#support">contact support</a> to raise a ticket with the Phantom support team.</p>
                    </div>

                    <h3>Using BLF Buttons</h3>
                    <p>BLF buttons provide quick access to common actions:</p>
                    <ul>
                        <li><strong>Click (not on call)</strong>: Dial the extension</li>
                        <li><strong>Click (during call)</strong>: Transfer the current call to that extension</li>
                        <li><strong>Right-click</strong>: Open configuration to edit or clear the button</li>
                    </ul>

                    <div class="info-box">
                        <div class="info-box-title">üí° Transfer Override</div>
                        <p>When configuring a BLF button, you can set a transfer method override (blind or attended) that will be used instead of your default transfer setting when transferring via that button.</p>
                    </div>
                </section>

                <!-- Voicemail Section -->
                <section id="voicemail">
                    <h2>Voicemail</h2>
                    <p>Connect365 provides a voicemail indicator that displays new message notifications and provides quick access to your voicemail.</p>

                    <h3>Voicemail Indicator</h3>
                    <p>The voicemail indicator appears in the status bar on the Phone tab. It shows:</p>
                    <ul>
                        <li>A voicemail icon that is always visible</li>
                        <li>When new messages are waiting, the icon will flash and display the number of new messages</li>
                    </ul>

                    <h3>Accessing Voicemail</h3>
                    <p>Click the voicemail icon to automatically dial your voicemail access code. The access code is configured in your Connection Settings (default is *97).</p>

                    <div class="info-box">
                        <div class="info-box-title">üí° Voicemail Access Code</div>
                        <p>The voicemail access code can be set in Settings > Connection Settings under "VM Access". If not configured, clicking the voicemail icon will display a reminder to set it up.</p>
                    </div>

                    <h3>New Message Indicator</h3>
                    <p>When you have new voicemail messages:</p>
                    <ul>
                        <li>The voicemail icon will flash to draw your attention</li>
                        <li>The number of new messages will be displayed (e.g. "5 New")</li>
                    </ul>
                </section>

                <!-- Company Numbers Section -->
                <section id="company-numbers">
                    <h2>Company Numbers</h2>
                    <p>Company Numbers allows you to manage multiple outbound caller IDs (CLI) and quickly switch between them when making calls.</p>

                    <h3>Enabling Company Numbers</h3>
                    <p>To use Company Numbers:</p>
                    <ol>
                        <li>Go to <strong>Settings</strong> > <strong>Interface Settings</strong></li>
                        <li>Enable the <strong>Company Numbers</strong> tab in the Visible Tabs section</li>
                        <li>Navigate to the <strong>Company Numbers</strong> tab</li>
                        <li>Add at least one company number</li>
                    </ol>

                    <h3>CLI Selector</h3>
                    <p>Once Company Numbers is enabled and at least one number has been added, a CLI selector will appear on the Phone tab above the dialpad. This selector allows you to:</p>
                    <ul>
                        <li>View your currently active outbound number</li>
                        <li>Click to open a dropdown of all available company numbers</li>
                        <li>Select a different number to use for outgoing calls</li>
                    </ul>

                    <h3>Switching Company Numbers</h3>
                    <p>To change your outbound caller ID:</p>
                    <ol>
                        <li>Click the CLI selector dropdown on the Phone tab</li>
                        <li>Select the company number you wish to use</li>
                        <li>Click <strong>Confirm</strong> to apply the change</li>
                        <li>The system will dial a code to update your CLI on the PBX</li>
                    </ol>

                    <div class="info-box">
                        <div class="info-box-title">üí° CLI Changes</div>
                        <p>When you confirm a CLI change, Connect365 automatically dials the appropriate code to update your outbound caller ID on the Phantom PBX. Your selected number will be used for all subsequent outgoing calls until changed.</p>
                    </div>

                    <div class="info-box">
                        <div class="info-box-title">üí° Agent Login Sync</div>
                        <p>When you log in as an agent, the CLI selector will automatically sync to display the current CLI associated with your agent session.</p>
                    </div>

                    <div class="warning-box">
                        <div class="warning-box-title">‚ö†Ô∏è Additional Setup Required</div>
                        <p>This feature requires additional programming on the Phantom PBX. Please <a href="#support">contact support</a> to raise a ticket with the Phantom team to enable Company Numbers for your system.</p>
                    </div>
                </section>

                <section id="queue-monitor">
                    <h2>Queue Monitor</h2>
                    <p>The Queue Monitor provides real-time visibility into call queue performance, helping supervisors and agents track SLA (Service Level Agreement) compliance and manage workload effectively.</p>

                    <h3>Enabling Queue Monitor</h3>
                    <p>To use Queue Monitor:</p>
                    <ol>
                        <li>Go to <strong>Settings</strong> > <strong>Interface Settings</strong></li>
                        <li>Enable the <strong>Queue Monitor</strong> tab in the Visible Tabs section</li>
                        <li>Navigate to the <strong>Queue Monitor</strong> tab</li>
                    </ol>

                    <h3>Adding Queues to Monitor</h3>
                    <ol>
                        <li>Click the <strong>Add Queue</strong> button</li>
                        <li>Select a queue from the available list (or select a queue group)</li>
                        <li>Configure SLA thresholds for:
                            <ul>
                                <li><strong>Missed % Warning</strong> - Percentage at which yellow warning appears</li>
                                <li><strong>Missed % Breach</strong> - Percentage at which red breach alert appears</li>
                                <li><strong>Avg Wait Time Warning</strong> - Seconds at which yellow warning appears</li>
                                <li><strong>Avg Wait Time Breach</strong> - Seconds at which red breach alert appears</li>
                            </ul>
                        </li>
                        <li>Click <strong>Save</strong></li>
                    </ol>

                    <h3>Queue Statistics Display</h3>
                    <p>Each monitored queue displays the following metrics in a grid format:</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>Label</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Queue</strong></td>
                                <td>QUE</td>
                                <td>Queue number and name. Column header shows alert status colour.</td>
                            </tr>
                            <tr>
                                <td><strong>Agents</strong></td>
                                <td>AGTS</td>
                                <td>Total number of agents assigned to the queue</td>
                            </tr>
                            <tr>
                                <td><strong>Free</strong></td>
                                <td>FREE</td>
                                <td>Number of agents available to take calls</td>
                            </tr>
                            <tr>
                                <td><strong>Busy</strong></td>
                                <td>BUSY</td>
                                <td>Number of agents currently on calls</td>
                            </tr>
                            <tr>
                                <td><strong>Paused</strong></td>
                                <td>PAUSE</td>
                                <td>Number of agents in paused state</td>
                            </tr>
                            <tr>
                                <td><strong>Waiting</strong></td>
                                <td>WAIT</td>
                                <td>Number of calls currently waiting in queue</td>
                            </tr>
                            <tr>
                                <td><strong>Answered</strong></td>
                                <td>ANS</td>
                                <td>Percentage of calls answered</td>
                            </tr>
                            <tr>
                                <td><strong>Missed</strong></td>
                                <td>MISS</td>
                                <td>Percentage of calls missed/abandoned (SLA tracked)</td>
                            </tr>
                            <tr>
                                <td><strong>Avg Wait Time</strong></td>
                                <td>AWT</td>
                                <td>Average wait time in seconds (SLA tracked)</td>
                            </tr>
                            <tr>
                                <td><strong>Total</strong></td>
                                <td>TOT</td>
                                <td>Total number of calls received</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>SLA Alert Indicators</h3>
                    <p>The Queue Monitor uses colour-coded alerts to indicate SLA status:</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Colour</th>
                                <th>State</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="background: #22c55e; color: white; text-align: center; font-weight: bold;">Green</td>
                                <td>Normal</td>
                                <td>All metrics within acceptable thresholds</td>
                            </tr>
                            <tr>
                                <td style="background: #eab308; color: white; text-align: center; font-weight: bold;">Yellow</td>
                                <td>Warning</td>
                                <td>Metric has reached warning threshold - attention needed</td>
                            </tr>
                            <tr>
                                <td style="background: #ef4444; color: white; text-align: center; font-weight: bold;">Red</td>
                                <td>Breach</td>
                                <td>Metric has exceeded breach threshold - immediate action required</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Tab Alert Notifications</h3>
                    <p>Even when you're not viewing the Queue Monitor tab, the tab icon will flash to alert you of SLA issues:</p>
                    <ul>
                        <li><strong>Slow yellow flash</strong> - One or more queues have reached warning threshold</li>
                        <li><strong>Fast red flash</strong> - One or more queues are in breach status</li>
                        <li><strong>No flash</strong> - All queues operating normally</li>
                    </ul>
                    <p>This allows you to continue working in other tabs while still being alerted to queue performance issues.</p>

                    <h3>Queue Sorting</h3>
                    <p>Queues in the monitor are automatically sorted by alert priority:</p>
                    <ol>
                        <li><strong>Breach</strong> queues appear first (most critical)</li>
                        <li><strong>Warning</strong> queues appear next</li>
                        <li><strong>Normal</strong> queues appear last, sorted by queue number</li>
                    </ol>

                    <h3>Managing Monitored Queues</h3>
                    <p>Each queue in the monitor has action buttons:</p>
                    <ul>
                        <li><strong>Edit</strong> (pencil icon) - Modify SLA thresholds for the queue</li>
                        <li><strong>Delete</strong> (trash icon) - Remove the queue from monitoring</li>
                    </ul>
                    <p>Use the <strong>Delete All</strong> button in the header to remove all monitored queues at once.</p>

                    <h3>Connection Status</h3>
                    <p>The Queue Monitor header displays the current connection status:</p>
                    <ul>
                        <li><strong>Connected</strong> (green wifi icon) - Real-time data streaming active</li>
                        <li><strong>Disconnected</strong> (red wifi icon) - No live data connection</li>
                    </ul>

                    <div class="info-box">
                        <strong>Real-time Updates:</strong> Queue statistics update in real-time via Socket.IO when connected. If the socket connection is lost, the display will show the last known values until reconnection.
                    </div>

                    <div class="info-box">
                        <strong>Using Queue Groups:</strong> When adding queues, you can select a queue group (configured in Settings > Queues) to quickly add multiple queues with the same SLA thresholds.
                    </div>
                </section>

                <!-- Continue with more sections... -->
                <!-- Due to length, I'll create a comprehensive structure -->
                
                <!-- Settings Sections -->
                <section id="connection-settings">
                    <h2>Connection Settings</h2>
                    <p>Configure your SIP connection credentials in <strong>Settings</strong> > <strong>Connection</strong>. These settings determine which Phantom PBX server you connect to and your agent identity.</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Setting</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Phantom ID</strong></td>
                                <td>A 3-4 digit identifier that specifies which Phantom PBX server to connect to. This is provided by your administrator. The Phantom ID automatically generates the correct WebSocket server URL.</td>
                            </tr>
                            <tr>
                                <td><strong>Username</strong></td>
                                <td>Your SIP username (device number). This is the identity used when registering with the PBX.</td>
                            </tr>
                            <tr>
                                <td><strong>Password</strong></td>
                                <td>Your SIP password for authentication. This is provided by your administrator and is securely stored locally.</td>
                            </tr>
                            <tr>
                                <td><strong>Voicemail Access</strong></td>
                                <td>The number to dial to access your voicemail. Default is <code>*97</code>. When you click the voicemail button, this number is dialled automatically.</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Saving Connection Settings</h3>
                    <p>After entering or modifying your connection details:</p>
                    <ol>
                        <li>Click the <strong>Save Connection Settings</strong> button</li>
                        <li>The button will show "Saved!" when successful</li>
                        <li>Return to the Phone tab and click <strong>Connect</strong> to register with the server</li>
                    </ol>

                    <div class="warning-box">
                        <strong>Important:</strong> Saving connection settings does not automatically connect you. After saving, you must click the Connect button on the Phone tab to establish a connection with the PBX server.
                    </div>

                    <div class="info-box">
                        <strong>Tip:</strong> If you don't have your connection credentials, contact your system administrator or the Phantom team at <a href="mailto:support@autocab.com">support@autocab.com</a>.
                    </div>
                </section>

                <section id="interface-settings">
                    <h2>Interface Settings</h2>
                    <p>Customise the appearance and visible features of Connect365.</p>

                    <h3>Appearance</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Setting</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Theme</strong></td>
                                <td>Choose between Auto (follows system preference), Light, or Dark mode</td>
                            </tr>
                            <tr>
                                <td><strong>Language</strong></td>
                                <td>Select the interface language</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Features</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Setting</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Enable BLF Panels</strong></td>
                                <td>Show or hide the Busy Lamp Field button panels on the Phone tab</td>
                            </tr>
                            <tr>
                                <td><strong>On-screen Notifications</strong></td>
                                <td>Enable or disable toast notifications for events within the app</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Visible Tabs</h3>
                    <p>Control which tabs appear in the tab navigation bar:</p>
                    <table>
                        <thead>
                            <tr>
                                <th>Setting</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Contacts</strong></td>
                                <td>Show or hide the Contacts tab for managing your contact list</td>
                            </tr>
                            <tr>
                                <td><strong>Activity</strong></td>
                                <td>Show or hide the Activity tab for viewing call history</td>
                            </tr>
                            <tr>
                                <td><strong>Company Numbers</strong></td>
                                <td>Show or hide the Company Numbers tab for accessing the company directory</td>
                            </tr>
                            <tr>
                                <td><strong>Queue Monitor</strong></td>
                                <td>Show or hide the Queue Monitor tab for viewing call queue statistics</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <section id="call-settings">
                    <h2>Call Settings</h2>
                    <p>Configure call behaviour and notifications in <strong>Settings</strong> > <strong>Call</strong>.</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Setting</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Auto Answer</strong></td>
                                <td>When enabled, incoming calls are automatically answered without requiring you to click the Answer button. Useful for high-volume call centres where agents need to handle calls immediately.</td>
                            </tr>
                            <tr>
                                <td><strong>Incoming Call Notifications</strong></td>
                                <td>Show browser notifications when calls arrive. This allows you to see incoming calls even when the application is minimised or in a background tab. Requires browser notification permission.</td>
                            </tr>
                            <tr>
                                <td><strong>Auto-focus on Notification Answer</strong></td>
                                <td>When you answer a call from a browser notification, automatically bring the Connect365 window to the front. Only appears when Incoming Call Notifications is enabled.</td>
                            </tr>
                            <tr>
                                <td><strong>Prefer Blind Transfer</strong></td>
                                <td>When enabled, the Transfer button defaults to blind transfer (immediate transfer without consultation). When disabled, defaults to attended transfer (speak to recipient first).</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Testing Notifications</h3>
                    <p>When Incoming Call Notifications is enabled, you can test that notifications are working correctly:</p>
                    <ol>
                        <li>Click the <strong>Test Notification</strong> button</li>
                        <li>A sample notification should appear from your browser</li>
                        <li>The current permission status is displayed next to the button</li>
                    </ol>

                    <div class="info-box">
                        <strong>Browser Permission Required:</strong> If notifications don't appear, check that you have granted notification permission to Connect365 in your browser settings. The permission status shows as "granted", "denied", or "default" (not yet requested).
                    </div>
                </section>

                <section id="queues-settings">
                    <h2>Queues Settings</h2>
                    <p>Create and manage queue groups for faster queue login.</p>

                    <h3>What are Queue Groups?</h3>
                    <p>Queue groups allow you to save collections of queues that you frequently join together. Instead of selecting individual queues each time you log in, you can select a pre-configured group to quickly join multiple queues at once.</p>

                    <h3>Where Queue Groups are Used</h3>
                    <p>Queue groups can be used in two places:</p>
                    
                    <h4>1. Queue Login</h4>
                    <p>In the <strong>Queue Login</strong> modal (accessed via the Queue button on the Phone tab), you can:</p>
                    <ul>
                        <li>Select individual queues from the available list</li>
                        <li>Click a queue group to instantly select all queues in that group</li>
                    </ul>

                    <h4>2. Queue Monitor</h4>
                    <p>In the <strong>Queue Monitor</strong> tab, queue groups allow you to quickly select multiple queues when configuring SLA settings. Instead of adding SLA thresholds to each queue individually, select a queue group to apply the same SLA settings to all queues in that group at once.</p>

                    <h3>Creating a Queue Group</h3>
                    <ol>
                        <li>Go to <strong>Settings</strong> > <strong>Queues</strong></li>
                        <li>Click the <strong>Add Queue Group</strong> button</li>
                        <li>Enter a name for the group (e.g. "Morning Shift" or "Sales Queues")</li>
                        <li>Select the queues to include in the group from the available list</li>
                        <li>Click <strong>Save</strong></li>
                    </ol>

                    <div class="screenshot">
                        <img src="images/queue-group-modal.png" alt="Queue group configuration modal" style="max-width: 100%; border-radius: 8px; border: 1px solid var(--border-color);" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="screenshot-placeholder" style="display: none;">
                            <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                            <div class="screenshot-label">Screenshot: Queue group configuration modal</div>
                        </div>
                    </div>

                    <h3>Queue Group Rules</h3>
                    <ul>
                        <li>Each queue group must have a unique name</li>
                        <li>A queue group must contain at least one queue</li>
                        <li>Each queue can only belong to one queue group - once a queue is added to a group, it cannot be added to another group</li>
                        <li>Queue groups are stored locally on your device</li>
                    </ul>

                    <div class="info-box">
                        <div class="info-box-title">üí° Tip</div>
                        <p>When editing a queue group, the queues already assigned to that group will remain available for selection, but queues assigned to other groups will be greyed out.</p>
                    </div>

                    <h3>Managing Queue Groups</h3>
                    <p>Each queue group in the list shows:</p>
                    <ul>
                        <li>The group ID (auto-generated)</li>
                        <li>The group name</li>
                        <li>The number of queues in the group</li>
                    </ul>
                    <p>Click the three dots menu on any group to:</p>
                    <ul>
                        <li><strong>Edit</strong>: Modify the group name or change the selected queues</li>
                        <li><strong>Delete</strong>: Remove the queue group</li>
                    </ul>
                    <p>Use the delete all button (trash icon) to remove all queue groups at once.</p>
                </section>

                <section id="audio-settings">
                    <h2>Audio Settings</h2>
                    <p>Configure your microphone, speaker, and ringtone devices in <strong>Settings</strong> > <strong>Audio</strong>.</p>

                    <div class="info-box">
                        <strong>Permission Required:</strong> Before you can select audio devices, you must grant microphone permission. Click the <strong>Grant Permission</strong> button if prompted.
                    </div>

                    <h3>Audio Devices</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Device</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Speaker</strong></td>
                                <td>The output device for call audio (hearing the other party). Click the play button to test that audio plays correctly through the selected speaker.</td>
                            </tr>
                            <tr>
                                <td><strong>Microphone</strong></td>
                                <td>The input device for your voice. When the Audio settings panel is open, a level meter shows your current microphone input in real-time.</td>
                            </tr>
                            <tr>
                                <td><strong>Ringer</strong></td>
                                <td>The output device for the ringtone when calls arrive. This can be different from your speaker - for example, use your computer speakers for ringing while using a headset for calls. Click the play button to test.</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Ringtone Selection</h3>
                    <p>Choose from several built-in ringtones:</p>
                    <ul>
                        <li><strong>Ringtone 1-5</strong> - Default ringtone options</li>
                        <li><strong>Custom</strong> - Your uploaded custom ringtone (if available)</li>
                    </ul>
                    <p>Click the play button next to the ringtone selector to preview the selected ringtone.</p>

                    <h3>Custom Ringtone</h3>
                    <p>Upload your own ringtone file for a personalised experience:</p>
                    
                    <h4>Requirements</h4>
                    <ul>
                        <li><strong>File formats:</strong> MP3 or WAV</li>
                        <li><strong>Maximum duration:</strong> 60 seconds</li>
                        <li><strong>Maximum file size:</strong> 5MB</li>
                    </ul>

                    <h4>Uploading a Custom Ringtone</h4>
                    <ol>
                        <li>In the <strong>Custom Ringtone</strong> section, click <strong>Choose File</strong></li>
                        <li>Select your MP3 or WAV file from your computer</li>
                        <li>The file will be validated and converted if necessary</li>
                        <li>Once uploaded, "Custom ringtone available" will be displayed</li>
                        <li>Select <strong>Custom</strong> from the Ringtone dropdown to use it</li>
                    </ol>

                    <h4>Removing a Custom Ringtone</h4>
                    <p>Click the trash icon next to "Custom ringtone available" to remove your uploaded ringtone. The ringtone selection will revert to the default.</p>

                    <h3>Refresh Devices</h3>
                    <p>If you connect or disconnect audio devices (headphones, microphones, etc.), click the <strong>Refresh Devices</strong> button to update the available device lists.</p>

                    <div class="info-box">
                        <strong>Tip:</strong> Test all your audio devices before taking calls. Use the play buttons to verify speakers and ringer output, and watch the microphone level meter to confirm your microphone is working.
                    </div>
                </section>

                <section id="busylight-settings">
                    <h2>Busylight Settings</h2>
                    <p>Connect365 supports Kuando Busylight hardware devices, providing a visual indicator of your call status that colleagues can see from a distance.</p>

                    <div class="warning-box">
                        <strong>Additional Software Required:</strong> To use Busylight with Connect365, you must have the Busylight Bridge Client software installed and running on your PC. This bridge software enables communication between the web application and your USB Busylight device. Contact your administrator for installation instructions.
                    </div>

                    <h3>How Busylight Works</h3>
                    <p>When enabled, the Busylight automatically changes colour based on your current call status:</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Colour</th>
                                <th>State</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="background: #666; color: white; text-align: center; font-weight: bold;">Off</td>
                                <td>Disconnected</td>
                                <td>Not registered to SIP server</td>
                            </tr>
                            <tr>
                                <td style="background: #999; color: white; text-align: center; font-weight: bold;">White</td>
                                <td>Connected</td>
                                <td>Registered but no agent logged in</td>
                            </tr>
                            <tr>
                                <td style="background: #22c55e; color: white; text-align: center; font-weight: bold;">Green</td>
                                <td>Idle</td>
                                <td>Available and ready to take calls</td>
                            </tr>
                            <tr>
                                <td style="background: #22c55e; color: white; text-align: center; font-weight: bold;">Green (flashing)</td>
                                <td>Idle + Voicemail</td>
                                <td>Available with new voicemail messages (when voicemail notify enabled)</td>
                            </tr>
                            <tr>
                                <td style="background: #ef4444; color: white; text-align: center; font-weight: bold;">Red</td>
                                <td>Busy</td>
                                <td>On an active call</td>
                            </tr>
                            <tr>
                                <td style="background: #ef4444; color: white; text-align: center; font-weight: bold;">Red (flashing) + Sound</td>
                                <td>Ringing</td>
                                <td>Incoming call ringing</td>
                            </tr>
                            <tr>
                                <td style="background: #ef4444; color: white; text-align: center; font-weight: bold;">Red (flashing)</td>
                                <td>Ring Waiting</td>
                                <td>On a call with another call waiting</td>
                            </tr>
                            <tr>
                                <td style="background: #eab308; color: white; text-align: center; font-weight: bold;">Yellow</td>
                                <td>Hold</td>
                                <td>Call on hold</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Multiple Line Support</h3>
                    <p>When handling multiple calls on different lines, the Busylight reflects the status of the currently selected line. If the selected line has a call on hold, the light shows yellow. If there's an active call on any line, it shows red.</p>

                    <h3>Configuration Options</h3>
                    <p>Configure Busylight in <strong>Settings</strong> > <strong>Busylight</strong>:</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Setting</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Enable Busylight</strong></td>
                                <td>Turn Busylight integration on or off</td>
                            </tr>
                            <tr>
                                <td><strong>Ring Sound</strong></td>
                                <td>Select the sound the Busylight plays for incoming calls. Options include: OpenOffice, Quiet, Funky, Fairy Tale, Kuando Train, Telephone Nordic, Telephone Original, and Telephone Pick Me Up. Note: Some Busylight models do not support sound.</td>
                            </tr>
                            <tr>
                                <td><strong>Ring Volume</strong></td>
                                <td>Adjust the volume of the Busylight ring sound (0-100%)</td>
                            </tr>
                            <tr>
                                <td><strong>Voicemail Notification</strong></td>
                                <td>When enabled, the Busylight will flash green slowly when you have unread voicemail messages</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Testing Connection</h3>
                    <p>Once the bridge software is running and Busylight is enabled:</p>
                    <ol>
                        <li>The settings will show your connected Busylight device information</li>
                        <li>Click <strong>Test Connection</strong> to verify the connection is working</li>
                        <li>The Busylight should briefly flash to confirm communication</li>
                    </ol>

                    <div class="info-box">
                        <strong>Bridge Not Connected:</strong> If you see "Bridge not connected - ensure bridge client is running", verify that the Busylight Bridge Client software is installed and currently running on your PC.
                    </div>
                </section>

                <section id="advanced-settings">
                    <h2>Advanced Settings</h2>
                    <p>Access debugging tools and data management options in <strong>Settings</strong> > <strong>Advanced</strong>.</p>

                    <h3>Debugging Options</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Setting</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Verbose Logging</strong></td>
                                <td>Enable detailed console logging for debugging. When enabled, Connect365 outputs extensive information about its operations to the browser's developer console (F12). Useful for troubleshooting issues.</td>
                            </tr>
                            <tr>
                                <td><strong>SIP Message Console Logging</strong></td>
                                <td>Enable SIP.js protocol message logging. This outputs raw SIP signalling messages to the console, helpful for diagnosing call setup and registration issues.</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Data Management</h3>

                    <h4>Import Data</h4>
                    <p>Restore previously exported settings and data:</p>
                    <ol>
                        <li>Click <strong>Import Data</strong></li>
                        <li>Select your backup JSON file</li>
                        <li>Choose which data to import (settings, contacts, call history, etc.)</li>
                        <li>Click <strong>Import</strong> to restore the data</li>
                    </ol>

                    <h4>Export Data</h4>
                    <p>Create a backup of your settings and data:</p>
                    <ol>
                        <li>Click <strong>Export Data</strong></li>
                        <li>Choose which data to include in the export</li>
                        <li>Click <strong>Export</strong> to download a JSON backup file</li>
                    </ol>
                    <p>The exported file can be used to restore your settings on another device or after reinstalling.</p>

                    <h4>Reset All Settings</h4>
                    <p>Restore Connect365 to its default state:</p>
                    <ul>
                        <li>Click <strong>Reset All Settings</strong></li>
                        <li>Confirm the action when prompted</li>
                    </ul>

                    <div class="warning-box">
                        <strong>Warning:</strong> Reset All Settings will permanently delete ALL your data including connection credentials, contacts, call history, queue groups, and preferences. This action cannot be undone. Consider exporting your data first as a backup.
                    </div>

                    <div class="info-box">
                        <strong>Tip:</strong> Use Export Data before making major changes or switching devices. This allows you to quickly restore your configuration if needed.
                    </div>
                </section>

                <!-- Troubleshooting -->
                <section id="common-issues">
                    <h2>Common Issues</h2>
                    
                    <h3>Cannot Register / Connection Failed</h3>
                    <p><strong>Possible causes:</strong></p>
                    <ul>
                        <li>Incorrect Phantom ID</li>
                        <li>Wrong username or password</li>
                        <li>Network connectivity issues</li>
                        <li>Firewall blocking WebSocket connections</li>
                    </ul>
                    <p><strong>Solutions:</strong></p>
                    <ol>
                        <li>Double-check your Phantom ID, username, and password</li>
                        <li>Ensure you have a stable internet connection</li>
                        <li>Try refreshing the page</li>
                        <li>Contact your administrator to verify your credentials</li>
                    </ol>

                    <h3>No Audio During Calls</h3>
                    <p><strong>Solutions:</strong></p>
                    <ol>
                        <li>Check that your browser has microphone permissions</li>
                        <li>Verify the correct audio devices are selected in Settings > Audio</li>
                        <li>Test your microphone and speakers</li>
                        <li>Try using headphones</li>
                    </ol>

                    <h3>Other Party Cannot Hear Me</h3>
                    <p><strong>Solutions:</strong></p>
                    <ol>
                        <li>Check if you're muted (look for the mute icon)</li>
                        <li>Verify microphone permissions</li>
                        <li>Test your microphone in Settings > Audio</li>
                        <li>Try a different microphone device</li>
                    </ol>
                </section>

                <section id="verbose-logging">
                    <h2>Enabling Verbose Logging</h2>
                    <p>If you're experiencing issues, enable verbose logging to help diagnose the problem:</p>
                    <ol>
                        <li>Go to <strong>Settings</strong> > <strong>Advanced</strong></li>
                        <li>Enable <strong>Verbose Logging</strong></li>
                        <li>Optionally enable <strong>SIP Message Console Logging</strong> for SIP-specific debugging</li>
                        <li>Open your browser's Developer Console (F12)</li>
                        <li>Reproduce the issue</li>
                        <li>Copy the console logs to share with support</li>
                    </ol>

                    <div class="warning-box">
                        <div class="warning-box-title">‚ö†Ô∏è Privacy Note</div>
                        <p>Verbose logs may contain sensitive information. Disable after troubleshooting.</p>
                    </div>
                </section>

                <!-- Feature Index -->
                <section id="feature-index">
                    <h2>Feature Index</h2>
                    <p>Quick reference to all features and where to find them:</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Feature</th>
                                <th>Location</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Agent Controls</td>
                                <td>Phone Tab</td>
                                <td>Login, Queue, and Pause buttons with status display</td>
                            </tr>
                            <tr>
                                <td>Make Calls</td>
                                <td>Phone Tab</td>
                                <td>Dial numbers and place outbound calls</td>
                            </tr>
                            <tr>
                                <td>Call Transfer</td>
                                <td>Active Call Screen</td>
                                <td>Blind or attended transfer to another extension</td>
                            </tr>
                            <tr>
                                <td>CLI Selector</td>
                                <td>Phone Tab</td>
                                <td>Choose which company number displays to called party</td>
                            </tr>
                            <tr>
                                <td>BLF Monitoring</td>
                                <td>Phone Tab (Line Keys)</td>
                                <td>Monitor extension status and one-click dialling</td>
                            </tr>
                            <tr>
                                <td>Voicemail</td>
                                <td>Phone Tab (VM Button)</td>
                                <td>Access voicemail with new message indicator</td>
                            </tr>
                            <tr>
                                <td>Contacts</td>
                                <td>Contacts Tab</td>
                                <td>Manage your contact list</td>
                            </tr>
                            <tr>
                                <td>Call History</td>
                                <td>Activity Tab</td>
                                <td>View recent calls and call back</td>
                            </tr>
                            <tr>
                                <td>Company Numbers</td>
                                <td>Company Numbers Tab</td>
                                <td>Quick access to company directory</td>
                            </tr>
                            <tr>
                                <td>Queue Monitor</td>
                                <td>Queue Monitor Tab</td>
                                <td>Real-time call queue status and statistics</td>
                            </tr>
                            <tr>
                                <td>Connection Setup</td>
                                <td>Settings > Connection</td>
                                <td>Configure Phantom ID and credentials</td>
                            </tr>
                            <tr>
                                <td>Interface Options</td>
                                <td>Settings > Interface</td>
                                <td>Theme, language, BLF, and visible tabs</td>
                            </tr>
                            <tr>
                                <td>Call Settings</td>
                                <td>Settings > Call</td>
                                <td>Auto-answer, transfer method, call behaviour</td>
                            </tr>
                            <tr>
                                <td>Queue Groups</td>
                                <td>Settings > Queues</td>
                                <td>Create named groups for queue login management</td>
                            </tr>
                            <tr>
                                <td>Audio Devices</td>
                                <td>Settings > Audio</td>
                                <td>Select microphone, speaker, ringtone device</td>
                            </tr>
                            <tr>
                                <td>Custom Ringtones</td>
                                <td>Settings > Audio</td>
                                <td>Upload and select custom ringtone files</td>
                            </tr>
                            <tr>
                                <td>Busylight</td>
                                <td>Settings > Busylight</td>
                                <td>Configure hardware status light</td>
                            </tr>
                            <tr>
                                <td>Import/Export</td>
                                <td>Settings > Advanced</td>
                                <td>Backup and restore all settings</td>
                            </tr>
                            <tr>
                                <td>Verbose Logging</td>
                                <td>Settings > Advanced</td>
                                <td>Enable detailed console logging for debugging</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <!-- Support Section -->
                <section id="support">
                    <h2>Support & Feedback</h2>
                    <p>Need additional help or want to provide feedback?</p>

                    <div class="info-box">
                        <div class="info-box-title">üìß Contact Support</div>
                        <p>For technical support, please contact your system administrator or Phantom PBX support team, or raise a support ticket via email at <a href="mailto:support@autocab.com">support@autocab.com</a>.</p>
                    </div>

                    <h3>Useful Information to Provide</h3>
                    <p>When contacting support, please provide:</p>
                    <ul>
                        <li>Your Phantom ID</li>
                        <li>Browser name and version</li>
                        <li>Operating system</li>
                        <li>Description of the issue</li>
                        <li>Console logs (if verbose logging is enabled)</li>
                        <li>Steps to reproduce the problem</li>
                    </ul>

                    <h3>Browser Requirements</h3>
                    <p>Connect365 requires a modern browser with WebRTC support:</p>
                    <ul>
                        <li>Google Chrome 70+</li>
                        <li>Microsoft Edge 79+</li>
                        <li>Safari 14+</li>
                        <li>Firefox 70+</li>
                    </ul>
                </section>
            </div>
        </main>
    </div>

    <script>
        // Internationalization (i18n) System
        const SUPPORTED_LANGUAGES = ['en', 'es', 'es-419', 'fi-FI', 'fr', 'fr-CA', 'nl', 'pt', 'pt-BR'];
        const DEFAULT_LANGUAGE = 'en';
        let currentTranslations = {};
        let currentLanguage = DEFAULT_LANGUAGE;

        // Get nested translation by key path (e.g., "content.overview.title")
        function getTranslation(key) {
            const keys = key.split('.');
            let value = currentTranslations;
            for (const k of keys) {
                if (value && typeof value === 'object' && k in value) {
                    value = value[k];
                } else {
                    return null; // Key not found
                }
            }
            return typeof value === 'string' ? value : null;
        }

        // Apply translations to all elements with data-i18n attributes
        function applyTranslations() {
            // Update document title
            const titleEl = document.querySelector('title[data-i18n]');
            if (titleEl) {
                const translation = getTranslation(titleEl.getAttribute('data-i18n'));
                if (translation) titleEl.textContent = translation;
            }

            // Update html lang attribute
            document.documentElement.lang = currentLanguage;

            // Update placeholder attributes
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const translation = getTranslation(el.getAttribute('data-i18n-placeholder'));
                if (translation) el.placeholder = translation;
            });

            // Update search "no results" message
            updateSearchNoResults();
        }

        // Update search "no results" text
        function updateSearchNoResults() {
            const noResultsText = getTranslation('search.no_results') || 'No results found';
            window.searchNoResultsText = noResultsText;
        }

        // Detect language from URL parameter, localStorage, or browser
        function detectLanguage() {
            // 1. Check URL parameter
            const urlParams = new URLSearchParams(window.location.search);
            const langParam = urlParams.get('lang');
            if (langParam && SUPPORTED_LANGUAGES.includes(langParam)) {
                return langParam;
            }

            // 2. Check localStorage (user's previous selection)
            const savedLang = localStorage.getItem('userguide-language');
            if (savedLang && SUPPORTED_LANGUAGES.includes(savedLang)) {
                return savedLang;
            }

            // 3. Check parent app settings (if available)
            try {
                const settingsStore = localStorage.getItem('settings-store');
                if (settingsStore) {
                    const settings = JSON.parse(settingsStore);
                    if (settings?.state?.language && SUPPORTED_LANGUAGES.includes(settings.state.language)) {
                        return settings.state.language;
                    }
                }
            } catch (e) {
                console.warn('Could not read parent app settings:', e);
            }

            // 4. Check browser language
            const browserLang = navigator.language || navigator.userLanguage;
            if (browserLang) {
                // Try exact match first
                if (SUPPORTED_LANGUAGES.includes(browserLang)) {
                    return browserLang;
                }
                // Try base language (e.g., "es" from "es-MX")
                const baseLang = browserLang.split('-')[0];
                if (SUPPORTED_LANGUAGES.includes(baseLang)) {
                    return baseLang;
                }
                // Map Latin American Spanish variants to es-419
                if (baseLang === 'es' && browserLang !== 'es-ES') {
                    return 'es-419';
                }
            }

            return DEFAULT_LANGUAGE;
        }

        // Load translations for a language
        async function loadTranslations(lang) {
            try {
                const response = await fetch(`/userguide/locales/${lang}.json`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return await response.json();
            } catch (error) {
                console.warn(`Failed to load translations for ${lang}:`, error);
                // Fallback to English if not already trying English
                if (lang !== DEFAULT_LANGUAGE) {
                    return loadTranslations(DEFAULT_LANGUAGE);
                }
                return {};
            }
        }

        // Change language
        async function changeLanguage(lang) {
            if (!SUPPORTED_LANGUAGES.includes(lang)) {
                lang = DEFAULT_LANGUAGE;
            }

            // Update URL without reloading
            const url = new URL(window.location);
            url.searchParams.set('lang', lang);
            window.history.replaceState({}, '', url);

            // Save to localStorage
            localStorage.setItem('userguide-language', lang);

            // Load and apply translations
            currentLanguage = lang;
            currentTranslations = await loadTranslations(lang);
            applyTranslations();

            // Update language selector
            const selector = document.getElementById('languageSelector');
            if (selector) {
                selector.value = lang;
            }

            console.log(`Language changed to: ${lang}`);
        }

        // Initialize i18n
        async function initI18n() {
            const lang = detectLanguage();
            currentLanguage = lang;
            currentTranslations = await loadTranslations(lang);
            applyTranslations();

            // Update language selector
            const selector = document.getElementById('languageSelector');
            if (selector) {
                selector.value = lang;
            }

            console.log(`User guide initialized with language: ${lang}`);
        }

        // Theme Toggle
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            
            if (currentTheme === 'dark') {
                html.setAttribute('data-theme', 'light');
                localStorage.setItem('userguide-theme', 'light');
                updateThemeColor('#ffffff');
            } else {
                html.setAttribute('data-theme', 'dark');
                localStorage.setItem('userguide-theme', 'dark');
                updateThemeColor('#1a202c');
            }
        }

        function updateThemeColor(color) {
            let metaThemeColor = document.querySelector('meta[name="theme-color"]:not([media])');
            if (!metaThemeColor) {
                metaThemeColor = document.createElement('meta');
                metaThemeColor.setAttribute('name', 'theme-color');
                document.head.appendChild(metaThemeColor);
            }
            metaThemeColor.setAttribute('content', color);
        }

        // Initialize theme from localStorage or system preference
        function initTheme() {
            const savedTheme = localStorage.getItem('userguide-theme');
            if (savedTheme) {
                document.documentElement.setAttribute('data-theme', savedTheme);
                updateThemeColor(savedTheme === 'dark' ? '#1a202c' : '#ffffff');
            } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.setAttribute('data-theme', 'dark');
                updateThemeColor('#1a202c');
            } else {
                updateThemeColor('#ffffff');
            }
        }

        // Sidebar Toggle for Mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('show');
        }

        // Active Link Highlighting
        function updateActiveLink() {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.sidebar-link');
            
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (window.scrollY >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        }

        // Search Functionality
        const searchData = [
            { title: 'Installation', section: 'installation', content: 'Install Connect365 PWA on desktop or mobile' },
            { title: 'First Setup', section: 'first-setup', content: 'Configure Phantom ID and SIP credentials' },
            { title: 'Agent Controls', section: 'agent-controls', content: 'Agent login logout queue pause buttons call center' },
            { title: 'Agent Status', section: 'agent-status', content: 'Agent number name not logged in paused status display' },
            { title: 'Login Button', section: 'agent-login-button', content: 'Agent login logout passcode DTMF' },
            { title: 'Queue Button', section: 'agent-queue-button', content: 'Queue membership join leave call queues' },
            { title: 'Pause Button', section: 'agent-pause-button', content: 'Pause resume unavailable break reason' },
            { title: 'Making Calls', section: 'making-calls', content: 'Place and receive calls using dialpad contacts' },
            { title: 'Outbound Calls', section: 'outbound-calls', content: 'Make calls using dialpad contacts history' },
            { title: 'Receiving Calls', section: 'receiving-calls', content: 'Answer reject incoming calls notifications' },
            { title: 'Call Controls', section: 'call-controls', content: 'Mute hold transfer DTMF call management' },
            { title: 'Contacts', section: 'contacts', content: 'Add edit delete search contacts' },
            { title: 'Call History', section: 'call-history', content: 'View recent calls call back activity' },
            { title: 'BLF Monitoring', section: 'blf-monitoring', content: 'Busy Lamp Field extension status speed dial transfer' },
            { title: 'Voicemail', section: 'voicemail', content: 'Voicemail indicator new messages access code *97' },
            { title: 'Company Numbers', section: 'company-numbers', content: 'CLI caller ID outbound number selector switch' },
            { title: 'Connection Settings', section: 'connection-settings', content: 'SIP settings Phantom ID credentials' },
            { title: 'Interface Settings', section: 'interface-settings', content: 'Theme language BLF panels visible tabs notifications' },
            { title: 'Call Settings', section: 'call-settings', content: 'Auto answer notifications transfer method' },
            { title: 'Queues Settings', section: 'queues-settings', content: 'Queue groups create manage login' },
            { title: 'Audio Settings', section: 'audio-settings', content: 'Microphone speaker ringtone device selection' },
            { title: 'Common Issues', section: 'common-issues', content: 'Troubleshooting registration audio problems' },
            { title: 'Verbose Logging', section: 'verbose-logging', content: 'Enable debugging console logs SIP messages' },
            { title: 'Feature Index', section: 'feature-index', content: 'Complete list of all features and locations' },
            { title: 'Support', section: 'support', content: 'Contact support feedback help' }
        ];

        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');

        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase().trim();
            
            if (query.length < 2) {
                searchResults.classList.remove('show');
                return;
            }

            const results = searchData.filter(item => 
                item.title.toLowerCase().includes(query) || 
                item.content.toLowerCase().includes(query)
            );

            if (results.length === 0) {
                const noResultsText = window.searchNoResultsText || 'No results found';
                searchResults.innerHTML = '<div class="no-results">' + noResultsText + '</div>';
                searchResults.classList.add('show');
                return;
            }

            searchResults.innerHTML = results.map(result => `
                <div class="search-result-item" onclick="navigateTo('${result.section}')">
                    <div class="search-result-title">${result.title}</div>
                    <div class="search-result-snippet">${result.content}</div>
                </div>
            `).join('');

            searchResults.classList.add('show');
        });

        function navigateTo(section) {
            searchResults.classList.remove('show');
            searchInput.value = '';
            document.getElementById(section).scrollIntoView({ behavior: 'smooth' });
        }

        // Close search results when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-box')) {
                searchResults.classList.remove('show');
            }
        });

        // Smooth scroll for sidebar links
        document.querySelectorAll('.sidebar-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const target = document.querySelector(link.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                    // Close sidebar on mobile after click
                    if (window.innerWidth <= 768) {
                        document.getElementById('sidebar').classList.remove('show');
                    }
                }
            });
        });

        // Initialize
        initTheme();
        initI18n(); // Initialize internationalization
        window.addEventListener('scroll', updateActiveLink);
        updateActiveLink();
    </script>
</body>
</html>
