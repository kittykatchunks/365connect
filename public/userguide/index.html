<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connect365 - User Guide</title>
    <link rel="icon" type="image/svg+xml" href="/icons/icon-512x512.png">
    <style>
        :root {
            --primary-color: #3182ce;
            --primary-hover: #2c5aa0;
            --bg-color: #ffffff;
            --text-color: #1a202c;
            --border-color: #e2e8f0;
            --sidebar-bg: #f7fafc;
            --code-bg: #edf2f7;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            --primary-color: #4299e1;
            --primary-hover: #63b3ed;
            --bg-color: #1a202c;
            --text-color: #e2e8f0;
            --border-color: #2d3748;
            --sidebar-bg: #2d3748;
            --code-bg: #2d3748;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.3);
        }

        @media (prefers-color-scheme: dark) {
            :root:not([data-theme="light"]) {
                --primary-color: #4299e1;
                --primary-hover: #63b3ed;
                --bg-color: #1a202c;
                --text-color: #e2e8f0;
                --border-color: #2d3748;
                --sidebar-bg: #2d3748;
                --code-bg: #2d3748;
                --shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
                --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.3);
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: var(--primary-color);
            border-bottom: 1px solid var(--primary-color);
            display: flex;
            align-items: center;
            padding: 0 2rem;
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.25rem;
            font-weight: 600;
            color: #ffffff;
            text-decoration: none;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            color: #ffffff;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .search-box {
            position: relative;
        }

        .search-input {
            padding: 0.5rem 2.5rem 0.5rem 1rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.15);
            color: #ffffff;
            width: 250px;
            font-size: 0.875rem;
            transition: all 0.2s;
        }
        
        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .search-input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);
        }

        .search-icon {
            position: absolute;
            right: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            opacity: 0.7;
            color: #ffffff;
        }

        .theme-toggle {
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            cursor: pointer;
            color: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .theme-icon {
            width: 20px;
            height: 20px;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 60px;
            left: 0;
            width: 280px;
            height: calc(100vh - 60px);
            background: var(--sidebar-bg);
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            padding: 2rem 0;
        }

        .sidebar-section {
            margin-bottom: 2rem;
        }

        .sidebar-title {
            padding: 0 1.5rem;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-color);
            opacity: 0.6;
            margin-bottom: 0.75rem;
        }

        .sidebar-nav {
            list-style: none;
        }

        .sidebar-nav li {
            margin-bottom: 0.25rem;
        }

        .sidebar-link {
            display: block;
            padding: 0.625rem 1.5rem;
            color: var(--text-color);
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .sidebar-link:hover {
            background: var(--bg-color);
            color: var(--primary-color);
        }

        .sidebar-link.active {
            background: var(--bg-color);
            color: var(--primary-color);
            border-left-color: var(--primary-color);
            font-weight: 600;
        }

        .sidebar-subsection {
            margin-top: 0.25rem;
            list-style: none;
            padding-left: 1rem;
        }

        .sidebar-subsection .sidebar-link {
            font-size: 0.85rem;
            padding-left: 2rem;
        }

        /* Main Content */
        .main {
            margin-left: 280px;
            margin-top: 60px;
            flex: 1;
            padding: 3rem;
            max-width: 900px;
        }

        .content h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .content h2 {
            font-size: 1.875rem;
            margin-top: 3rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border-color);
            color: var(--text-color);
        }

        .content h3 {
            font-size: 1.5rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .content h4 {
            font-size: 1.25rem;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            color: var(--text-color);
        }

        .content p {
            margin-bottom: 1rem;
        }

        .content ul, .content ol {
            margin-bottom: 1rem;
            padding-left: 2rem;
        }

        .content li {
            margin-bottom: 0.5rem;
        }

        .content code {
            background: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-size: 0.875em;
            font-family: 'Courier New', monospace;
        }

        .content pre {
            background: var(--code-bg);
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
            margin-bottom: 1rem;
        }

        .content pre code {
            background: none;
            padding: 0;
        }

        /* Screenshot Placeholder */
        .screenshot {
            background: var(--code-bg);
            border: 2px dashed var(--border-color);
            border-radius: 8px;
            padding: 3rem;
            text-align: center;
            margin: 2rem 0;
            color: var(--text-color);
            opacity: 0.7;
        }

        .screenshot-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 1rem;
            opacity: 0.5;
        }

        .screenshot-label {
            font-size: 0.875rem;
            font-style: italic;
        }

        /* Info Box */
        .info-box {
            background: rgba(49, 130, 206, 0.1);
            border-left: 4px solid var(--primary-color);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        .info-box-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .warning-box {
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid #f59e0b;
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        .warning-box-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #f59e0b;
        }

        /* Table */
        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
        }

        .content th,
        .content td {
            padding: 0.75rem;
            text-align: left;
            border: 1px solid var(--border-color);
        }

        .content th {
            background: var(--sidebar-bg);
            font-weight: 600;
        }

        /* Quick Links */
        .quick-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .quick-link-card {
            background: var(--sidebar-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            text-decoration: none;
            color: var(--text-color);
            transition: all 0.2s;
        }

        .quick-link-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .quick-link-icon {
            width: 32px;
            height: 32px;
            margin-bottom: 0.75rem;
            color: var(--primary-color);
        }

        .quick-link-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .quick-link-desc {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        /* Search Results */
        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            margin-top: 0.5rem;
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            box-shadow: var(--shadow-lg);
            max-height: 400px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
        }

        .search-results.show {
            display: block;
        }

        .search-result-item {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: background 0.2s;
        }

        .search-result-item:hover {
            background: var(--sidebar-bg);
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--primary-color);
        }

        .search-result-snippet {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        .no-results {
            padding: 2rem;
            text-align: center;
            opacity: 0.6;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
                z-index: 50;
            }

            .sidebar.show {
                transform: translateX(0);
            }

            .main {
                margin-left: 0;
                padding: 2rem 1rem;
            }

            .search-input {
                width: 150px;
            }

            .content h1 {
                font-size: 2rem;
            }

            .content h2 {
                font-size: 1.5rem;
            }
        }

        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            padding: 0.5rem;
            background: none;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            color: var(--text-color);
        }

        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }

        .menu-icon {
            width: 24px;
            height: 24px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <button class="mobile-menu-toggle" onclick="toggleSidebar()">
                <svg class="menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
            </button>
            <a href="#" class="logo">
                <svg class="logo-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h16v12z"/>
                    <path d="M6.5 9.5h3v5h-3zm4.5 0h3v5h-3zm4.5 0h3v5h-3z"/>
                </svg>
                Connect365 User Guide
            </a>
            <div class="header-actions">
                <div class="search-box">
                    <input type="text" class="search-input" id="searchInput" placeholder="Search documentation...">
                    <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    <div class="search-results" id="searchResults"></div>
                </div>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <svg class="theme-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">Getting Started</div>
                <ul class="sidebar-nav">
                    <li><a href="#overview" class="sidebar-link active">Overview</a></li>
                    <li><a href="#installation" class="sidebar-link">Installation</a></li>
                    <li><a href="#first-setup" class="sidebar-link">First Time Setup</a></li>
                    <li><a href="#quick-start" class="sidebar-link">Quick Start Guide</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Core Features</div>
                <ul class="sidebar-nav">
                    <li>
                        <a href="#making-calls" class="sidebar-link">Making Calls</a>
                        <ul class="sidebar-subsection">
                            <li><a href="#outbound-calls" class="sidebar-link">Outbound Calls</a></li>
                            <li><a href="#receiving-calls" class="sidebar-link">Receiving Calls</a></li>
                            <li><a href="#call-controls" class="sidebar-link">Call Controls</a></li>
                        </ul>
                    </li>
                    <li><a href="#contacts" class="sidebar-link">Contacts Management</a></li>
                    <li><a href="#call-history" class="sidebar-link">Call History</a></li>
                    <li><a href="#voicemail" class="sidebar-link">Voicemail</a></li>
                    <li><a href="#blf-monitoring" class="sidebar-link">BLF Monitoring</a></li>
                    <li><a href="#company-numbers" class="sidebar-link">Company Numbers</a></li>
                    <li><a href="#queue-monitor" class="sidebar-link">Queue Monitor</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Settings</div>
                <ul class="sidebar-nav">
                    <li><a href="#connection-settings" class="sidebar-link">Connection Settings</a></li>
                    <li><a href="#interface-settings" class="sidebar-link">Interface Settings</a></li>
                    <li><a href="#audio-settings" class="sidebar-link">Audio Settings</a></li>
                    <li><a href="#call-settings" class="sidebar-link">Call Settings</a></li>
                    <li><a href="#busylight-settings" class="sidebar-link">Busylight Settings</a></li>
                    <li><a href="#advanced-settings" class="sidebar-link">Advanced Settings</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Troubleshooting</div>
                <ul class="sidebar-nav">
                    <li><a href="#common-issues" class="sidebar-link">Common Issues</a></li>
                    <li><a href="#audio-problems" class="sidebar-link">Audio Problems</a></li>
                    <li><a href="#connection-problems" class="sidebar-link">Connection Problems</a></li>
                    <li><a href="#verbose-logging" class="sidebar-link">Enabling Verbose Logging</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Reference</div>
                <ul class="sidebar-nav">
                    <li><a href="#keyboard-shortcuts" class="sidebar-link">Keyboard Shortcuts</a></li>
                    <li><a href="#feature-index" class="sidebar-link">Feature Index</a></li>
                    <li><a href="#glossary" class="sidebar-link">Glossary</a></li>
                    <li><a href="#support" class="sidebar-link">Support & Feedback</a></li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main">
            <div class="content">
                <!-- Overview Section -->
                <section id="overview">
                    <h1>Connect365 User Guide</h1>
                    <p>Welcome to Connect365 - a powerful WebRTC SIP phone designed for Autocab365 taxi dispatch systems. This guide will help you get started and make the most of all available features.</p>

                    <div class="quick-links">
                        <a href="#installation" class="quick-link-card">
                            <svg class="quick-link-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                            </svg>
                            <div class="quick-link-title">Installation</div>
                            <div class="quick-link-desc">Install Connect365 on your device</div>
                        </a>
                        <a href="#first-setup" class="quick-link-card">
                            <svg class="quick-link-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            </svg>
                            <div class="quick-link-title">First Setup</div>
                            <div class="quick-link-desc">Configure your connection</div>
                        </a>
                        <a href="#making-calls" class="quick-link-card">
                            <svg class="quick-link-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                            </svg>
                            <div class="quick-link-title">Making Calls</div>
                            <div class="quick-link-desc">Learn how to place and receive calls</div>
                        </a>
                        <a href="#common-issues" class="quick-link-card">
                            <svg class="quick-link-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <div class="quick-link-title">Troubleshooting</div>
                            <div class="quick-link-desc">Resolve common issues</div>
                        </a>
                    </div>
                </section>

                <!-- Installation Section -->
                <section id="installation">
                    <h2>Installation</h2>
                    <p>Connect365 is a Progressive Web App (PWA) that can be installed on your device for a native app experience.</p>
                    
                    <h3>Desktop Installation</h3>
                    <ol>
                        <li>Open Connect365 in your browser (Chrome, Edge, or Safari recommended)</li>
                        <li>Look for the install button in the address bar or browser menu</li>
                        <li>Click "Install" to add Connect365 to your desktop</li>
                        <li>The app will open in its own window, separate from your browser</li>
                    </ol>

                    <div class="screenshot">
                        <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                        <div class="screenshot-label">Screenshot: Desktop installation prompt</div>
                    </div>

                    <div class="info-box">
                        <div class="info-box-title">üí° Tip</div>
                        <p>Installing Connect365 as a PWA provides better performance, offline capabilities, and notifications.</p>
                    </div>
                </section>

                <!-- First Time Setup -->
                <section id="first-setup">
                    <h2>First Time Setup</h2>
                    <p>Before you can make calls, you need to configure your connection settings with your Phantom ID and SIP credentials.</p>

                    <h3>Step 1: Open Settings</h3>
                    <ol>
                        <li>Click the <strong>Settings</strong> tab in the bottom navigation</li>
                        <li>The Connection settings section should open automatically</li>
                    </ol>

                    <div class="screenshot">
                        <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                        <div class="screenshot-label">Screenshot: Settings tab location</div>
                    </div>

                    <h3>Step 2: Enter Connection Details</h3>
                    <p>You'll need the following information from your administrator:</p>
                    <ul>
                        <li><strong>Phantom ID</strong>: Your unique server identifier (e.g., 388)</li>
                        <li><strong>SIP Username</strong>: Your extension number</li>
                        <li><strong>SIP Password</strong>: Your SIP password</li>
                        <li><strong>Voicemail Access</strong>: Voicemail retrieval number (optional)</li>
                    </ul>

                    <div class="screenshot">
                        <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        <div class="screenshot-label">Screenshot: Connection settings form</div>
                    </div>

                    <h3>Step 3: Save and Register</h3>
                    <ol>
                        <li>Enter all required information</li>
                        <li>Click the <strong>Save Connection Settings</strong> button</li>
                        <li>Wait for the registration status to show "Registered"</li>
                    </ol>

                    <div class="info-box">
                        <div class="info-box-title">üí° About Phantom ID</div>
                        <p>The Phantom ID automatically generates the correct server URLs for your connection. You don't need to manually enter server addresses.</p>
                    </div>

                    <div class="warning-box">
                        <div class="warning-box-title">‚ö†Ô∏è Important</div>
                        <p>Make sure your browser has microphone permissions enabled. You'll be prompted to allow access when you first make or receive a call.</p>
                    </div>
                </section>

                <!-- Quick Start Guide -->
                <section id="quick-start">
                    <h2>Quick Start Guide</h2>
                    <p>Once you're set up, here's how to perform common tasks:</p>

                    <h3>Making Your First Call</h3>
                    <ol>
                        <li>Click the <strong>Phone</strong> tab</li>
                        <li>Enter a phone number using the dialpad</li>
                        <li>Click the green <strong>Call</strong> button</li>
                        <li>Use the call controls during the call (mute, hold, transfer, etc.)</li>
                        <li>Click <strong>Hang Up</strong> when finished</li>
                    </ol>

                    <h3>Adding a Contact</h3>
                    <ol>
                        <li>Click the <strong>Contacts</strong> tab</li>
                        <li>Click the <strong>Add Contact</strong> button</li>
                        <li>Enter contact details (name, number, email, etc.)</li>
                        <li>Click <strong>Save</strong></li>
                    </ol>

                    <h3>Viewing Call History</h3>
                    <ol>
                        <li>Click the <strong>Activity</strong> tab</li>
                        <li>Browse your recent calls</li>
                        <li>Click on any entry to see details or call back</li>
                    </ol>
                </section>

                <!-- Making Calls Section -->
                <section id="making-calls">
                    <h2>Making Calls</h2>
                    <p>Connect365 provides multiple ways to initiate and manage calls.</p>

                    <h3 id="outbound-calls">Outbound Calls</h3>
                    <p>There are several ways to make an outbound call:</p>

                    <h4>Method 1: Using the Dialpad</h4>
                    <ol>
                        <li>Navigate to the <strong>Phone</strong> tab</li>
                        <li>Click numbers on the dialpad or type using your keyboard</li>
                        <li>Click the green <strong>Call</strong> button or press Enter</li>
                    </ol>

                    <div class="screenshot">
                        <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"/>
                        </svg>
                        <div class="screenshot-label">Screenshot: Phone dialpad interface</div>
                    </div>

                    <h4>Method 2: From Contacts</h4>
                    <ol>
                        <li>Go to the <strong>Contacts</strong> tab</li>
                        <li>Find the contact you want to call</li>
                        <li>Click the phone icon next to their name</li>
                    </ol>

                    <h4>Method 3: From Call History</h4>
                    <ol>
                        <li>Go to the <strong>Activity</strong> tab</li>
                        <li>Find the call you want to return</li>
                        <li>Click the phone icon to call back</li>
                    </ol>

                    <h4>Method 4: From Company Numbers</h4>
                    <ol>
                        <li>Go to the <strong>Company Numbers</strong> tab</li>
                        <li>Click the call icon next to any number</li>
                    </ol>

                    <h3 id="receiving-calls">Receiving Calls</h3>
                    <p>When someone calls you:</p>
                    <ol>
                        <li>You'll see an incoming call notification</li>
                        <li>The caller's information will be displayed (if available)</li>
                        <li>Click <strong>Answer</strong> to accept the call</li>
                        <li>Or click <strong>Reject</strong> to decline</li>
                    </ol>

                    <div class="screenshot">
                        <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                        </svg>
                        <div class="screenshot-label">Screenshot: Incoming call notification</div>
                    </div>

                    <div class="info-box">
                        <div class="info-box-title">üí° Auto Answer</div>
                        <p>You can enable auto-answer in Settings > Call Settings to automatically accept incoming calls.</p>
                    </div>

                    <h3 id="call-controls">Call Controls</h3>
                    <p>During an active call, you have access to several controls:</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Control</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Mute</strong></td>
                                <td>Mute/unmute your microphone</td>
                            </tr>
                            <tr>
                                <td><strong>Hold</strong></td>
                                <td>Put the call on hold</td>
                            </tr>
                            <tr>
                                <td><strong>Transfer</strong></td>
                                <td>Transfer the call to another extension</td>
                            </tr>
                            <tr>
                                <td><strong>DTMF</strong></td>
                                <td>Send dial tones (for IVR navigation)</td>
                            </tr>
                            <tr>
                                <td><strong>Hang Up</strong></td>
                                <td>End the call</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="screenshot">
                        <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"/>
                        </svg>
                        <div class="screenshot-label">Screenshot: Active call controls</div>
                    </div>

                    <h4>Call Transfer</h4>
                    <p>There are two types of call transfers:</p>
                    <ul>
                        <li><strong>Blind Transfer</strong>: Transfer immediately without speaking to the recipient</li>
                        <li><strong>Attended Transfer</strong>: Speak with the recipient before completing the transfer</li>
                    </ul>

                    <p>To transfer a call:</p>
                    <ol>
                        <li>Click the <strong>Transfer</strong> button during a call</li>
                        <li>Enter the extension or number to transfer to</li>
                        <li>Choose blind or attended transfer</li>
                        <li>Complete the transfer</li>
                    </ol>
                </section>

                <!-- Contacts Section -->
                <section id="contacts">
                    <h2>Contacts Management</h2>
                    <p>Manage your contacts to quickly call frequently dialed numbers.</p>

                    <h3>Adding Contacts</h3>
                    <ol>
                        <li>Go to the <strong>Contacts</strong> tab</li>
                        <li>Click <strong>Add Contact</strong></li>
                        <li>Fill in the contact information:
                            <ul>
                                <li>Contact Name (required)</li>
                                <li>Contact Number (required)</li>
                                <li>Email</li>
                                <li>Notes</li>
                            </ul>
                        </li>
                        <li>Optionally add a profile picture</li>
                        <li>Click <strong>Save</strong></li>
                    </ol>

                    <div class="screenshot">
                        <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"/>
                        </svg>
                        <div class="screenshot-label">Screenshot: Add contact modal</div>
                    </div>

                    <h3>Editing Contacts</h3>
                    <ol>
                        <li>Find the contact in your contacts list</li>
                        <li>Click the <strong>Edit</strong> icon</li>
                        <li>Update the information</li>
                        <li>Click <strong>Save</strong></li>
                    </ol>

                    <h3>Deleting Contacts</h3>
                    <ol>
                        <li>Find the contact you want to delete</li>
                        <li>Click the <strong>Delete</strong> icon</li>
                        <li>Confirm the deletion</li>
                    </ol>

                    <h3>Searching Contacts</h3>
                    <p>Use the search box at the top of the Contacts tab to quickly find contacts by name or number.</p>

                    <div class="info-box">
                        <div class="info-box-title">üí° Quick Call</div>
                        <p>Click the phone icon next to any contact to instantly call them.</p>
                    </div>
                </section>

                <!-- Call History Section -->
                <section id="call-history">
                    <h2>Call History</h2>
                    <p>View and manage your call history in the Activity tab.</p>

                    <h3>Viewing Call History</h3>
                    <p>The Activity tab shows all your recent calls with the following information:</p>
                    <ul>
                        <li>Call direction (inbound, outbound, missed)</li>
                        <li>Contact name or phone number</li>
                        <li>Date and time</li>
                        <li>Call duration</li>
                    </ul>

                    <div class="screenshot">
                        <svg class="screenshot-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <div class="screenshot-label">Screenshot: Call history view</div>
                    </div>

                    <h3>Call History Actions</h3>
                    <p>For each call history entry, you can:</p>
                    <ul>
                        <li><strong>Call Back</strong>: Click the phone icon to return the call</li>
                        <li><strong>Add to Contacts</strong>: Save the number as a new contact</li>
                        <li><strong>View Details</strong>: Click the entry to see full call information</li>
                    </ul>

                    <h3>Filtering Call History</h3>
                    <p>Filter your call history by:</p>
                    <ul>
                        <li>All calls</li>
                        <li>Missed calls</li>
                        <li>Incoming calls</li>
                        <li>Outgoing calls</li>
                    </ul>
                </section>

                <!-- Continue with more sections... -->
                <!-- Due to length, I'll create a comprehensive structure -->
                
                <!-- Settings Sections -->
                <section id="connection-settings">
                    <h2>Connection Settings</h2>
                    <p>Configure your SIP connection and server details.</p>
                    <!-- Content continues... -->
                </section>

                <section id="audio-settings">
                    <h2>Audio Settings</h2>
                    <p>Configure your microphone, speaker, and ringtone devices.</p>
                    <!-- Content continues... -->
                </section>

                <!-- Troubleshooting -->
                <section id="common-issues">
                    <h2>Common Issues</h2>
                    
                    <h3>Cannot Register / Connection Failed</h3>
                    <p><strong>Possible causes:</strong></p>
                    <ul>
                        <li>Incorrect Phantom ID</li>
                        <li>Wrong username or password</li>
                        <li>Network connectivity issues</li>
                        <li>Firewall blocking WebSocket connections</li>
                    </ul>
                    <p><strong>Solutions:</strong></p>
                    <ol>
                        <li>Double-check your Phantom ID, username, and password</li>
                        <li>Ensure you have a stable internet connection</li>
                        <li>Try refreshing the page</li>
                        <li>Contact your administrator to verify your credentials</li>
                    </ol>

                    <h3>No Audio During Calls</h3>
                    <p><strong>Solutions:</strong></p>
                    <ol>
                        <li>Check that your browser has microphone permissions</li>
                        <li>Verify the correct audio devices are selected in Settings > Audio</li>
                        <li>Test your microphone and speakers</li>
                        <li>Try using headphones</li>
                    </ol>

                    <h3>Other Party Cannot Hear Me</h3>
                    <p><strong>Solutions:</strong></p>
                    <ol>
                        <li>Check if you're muted (look for the mute icon)</li>
                        <li>Verify microphone permissions</li>
                        <li>Test your microphone in Settings > Audio</li>
                        <li>Try a different microphone device</li>
                    </ol>
                </section>

                <section id="verbose-logging">
                    <h2>Enabling Verbose Logging</h2>
                    <p>If you're experiencing issues, enable verbose logging to help diagnose the problem:</p>
                    <ol>
                        <li>Go to <strong>Settings</strong> > <strong>Advanced</strong></li>
                        <li>Enable <strong>Verbose Logging</strong></li>
                        <li>Optionally enable <strong>SIP Message Console Logging</strong> for SIP-specific debugging</li>
                        <li>Open your browser's Developer Console (F12)</li>
                        <li>Reproduce the issue</li>
                        <li>Copy the console logs to share with support</li>
                    </ol>

                    <div class="warning-box">
                        <div class="warning-box-title">‚ö†Ô∏è Privacy Note</div>
                        <p>Verbose logs may contain sensitive information. Disable after troubleshooting.</p>
                    </div>
                </section>

                <!-- Feature Index -->
                <section id="feature-index">
                    <h2>Feature Index</h2>
                    <p>Quick reference to all features and where to find them:</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Feature</th>
                                <th>Location</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Make Calls</td>
                                <td>Phone Tab</td>
                                <td>Dial numbers and place outbound calls</td>
                            </tr>
                            <tr>
                                <td>Contacts</td>
                                <td>Contacts Tab</td>
                                <td>Manage your contact list</td>
                            </tr>
                            <tr>
                                <td>Call History</td>
                                <td>Activity Tab</td>
                                <td>View recent calls and call back</td>
                            </tr>
                            <tr>
                                <td>BLF Monitoring</td>
                                <td>Phone Tab (Line Keys)</td>
                                <td>Monitor extension status</td>
                            </tr>
                            <tr>
                                <td>Company Numbers</td>
                                <td>Company Numbers Tab</td>
                                <td>Quick access to company directory</td>
                            </tr>
                            <tr>
                                <td>Queue Monitor</td>
                                <td>Queue Monitor Tab</td>
                                <td>Monitor call queue status</td>
                            </tr>
                            <tr>
                                <td>Voicemail</td>
                                <td>Phone Tab (VM Button)</td>
                                <td>Access voicemail messages</td>
                            </tr>
                            <tr>
                                <td>Connection Setup</td>
                                <td>Settings > Connection</td>
                                <td>Configure Phantom ID and credentials</td>
                            </tr>
                            <tr>
                                <td>Audio Devices</td>
                                <td>Settings > Audio</td>
                                <td>Select microphone, speaker, ringtone</td>
                            </tr>
                            <tr>
                                <td>Theme</td>
                                <td>Settings > Interface</td>
                                <td>Choose light, dark, or auto theme</td>
                            </tr>
                            <tr>
                                <td>Language</td>
                                <td>Settings > Interface</td>
                                <td>Change display language</td>
                            </tr>
                            <tr>
                                <td>Import/Export</td>
                                <td>Settings > Advanced</td>
                                <td>Backup and restore settings</td>
                            </tr>
                            <tr>
                                <td>Busylight</td>
                                <td>Settings > Busylight</td>
                                <td>Configure hardware status light</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <!-- Support Section -->
                <section id="support">
                    <h2>Support & Feedback</h2>
                    <p>Need additional help or want to provide feedback?</p>

                    <div class="info-box">
                        <div class="info-box-title">üìß Contact Support</div>
                        <p>For technical support, please contact your system administrator or Phantom PBX support team.</p>
                    </div>

                    <h3>Useful Information to Provide</h3>
                    <p>When contacting support, please provide:</p>
                    <ul>
                        <li>Your Phantom ID</li>
                        <li>Browser name and version</li>
                        <li>Operating system</li>
                        <li>Description of the issue</li>
                        <li>Console logs (if verbose logging is enabled)</li>
                        <li>Steps to reproduce the problem</li>
                    </ul>

                    <h3>Browser Requirements</h3>
                    <p>Connect365 requires a modern browser with WebRTC support:</p>
                    <ul>
                        <li>Google Chrome 70+</li>
                        <li>Microsoft Edge 79+</li>
                        <li>Safari 14+</li>
                        <li>Firefox 70+</li>
                    </ul>
                </section>
            </div>
        </main>
    </div>

    <script>
        // Theme Toggle
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            
            if (currentTheme === 'dark') {
                html.setAttribute('data-theme', 'light');
                localStorage.setItem('userguide-theme', 'light');
            } else {
                html.setAttribute('data-theme', 'dark');
                localStorage.setItem('userguide-theme', 'dark');
            }
        }

        // Initialize theme from localStorage or system preference
        function initTheme() {
            const savedTheme = localStorage.getItem('userguide-theme');
            if (savedTheme) {
                document.documentElement.setAttribute('data-theme', savedTheme);
            } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.setAttribute('data-theme', 'dark');
            }
        }

        // Sidebar Toggle for Mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('show');
        }

        // Active Link Highlighting
        function updateActiveLink() {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.sidebar-link');
            
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (window.scrollY >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        }

        // Search Functionality
        const searchData = [
            { title: 'Installation', section: 'installation', content: 'Install Connect365 PWA on desktop or mobile' },
            { title: 'First Setup', section: 'first-setup', content: 'Configure Phantom ID and SIP credentials' },
            { title: 'Making Calls', section: 'making-calls', content: 'Place and receive calls using dialpad contacts' },
            { title: 'Outbound Calls', section: 'outbound-calls', content: 'Make calls using dialpad contacts history' },
            { title: 'Receiving Calls', section: 'receiving-calls', content: 'Answer reject incoming calls notifications' },
            { title: 'Call Controls', section: 'call-controls', content: 'Mute hold transfer DTMF call management' },
            { title: 'Contacts', section: 'contacts', content: 'Add edit delete search contacts' },
            { title: 'Call History', section: 'call-history', content: 'View recent calls call back activity' },
            { title: 'Connection Settings', section: 'connection-settings', content: 'SIP settings Phantom ID credentials' },
            { title: 'Audio Settings', section: 'audio-settings', content: 'Microphone speaker ringtone device selection' },
            { title: 'Common Issues', section: 'common-issues', content: 'Troubleshooting registration audio problems' },
            { title: 'Verbose Logging', section: 'verbose-logging', content: 'Enable debugging console logs SIP messages' },
            { title: 'Feature Index', section: 'feature-index', content: 'Complete list of all features and locations' },
            { title: 'Support', section: 'support', content: 'Contact support feedback help' }
        ];

        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');

        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase().trim();
            
            if (query.length < 2) {
                searchResults.classList.remove('show');
                return;
            }

            const results = searchData.filter(item => 
                item.title.toLowerCase().includes(query) || 
                item.content.toLowerCase().includes(query)
            );

            if (results.length === 0) {
                searchResults.innerHTML = '<div class="no-results">No results found</div>';
                searchResults.classList.add('show');
                return;
            }

            searchResults.innerHTML = results.map(result => `
                <div class="search-result-item" onclick="navigateTo('${result.section}')">
                    <div class="search-result-title">${result.title}</div>
                    <div class="search-result-snippet">${result.content}</div>
                </div>
            `).join('');

            searchResults.classList.add('show');
        });

        function navigateTo(section) {
            searchResults.classList.remove('show');
            searchInput.value = '';
            document.getElementById(section).scrollIntoView({ behavior: 'smooth' });
        }

        // Close search results when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-box')) {
                searchResults.classList.remove('show');
            }
        });

        // Smooth scroll for sidebar links
        document.querySelectorAll('.sidebar-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const target = document.querySelector(link.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                    // Close sidebar on mobile after click
                    if (window.innerWidth <= 768) {
                        document.getElementById('sidebar').classList.remove('show');
                    }
                }
            });
        });

        // Initialize
        initTheme();
        window.addEventListener('scroll', updateActiveLink);
        updateActiveLink();
    </script>
</body>
</html>
